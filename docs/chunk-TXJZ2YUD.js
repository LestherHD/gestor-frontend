import{a as Ce,b as xe}from"./chunk-32UMIG7Q.js";import"./chunk-EQAIAAQJ.js";import{a as j,b as Se,c as ve}from"./chunk-G4V3YEOC.js";import{a as _e}from"./chunk-GIXF4MEC.js";import{a as ne,b as re,c as be}from"./chunk-QTZQAGUP.js";import{b as oe,c as B,d as ae,e as se,f as b,i as h,k as le,l as me,o as ce,q as de,r as pe,s as ue,t as he,w as fe,x as ge}from"./chunk-JSCADVZE.js";import"./chunk-GTKG6TS5.js";import{$ as s,Bc as Z,Da as z,Fa as p,Fd as te,Ga as f,H as O,Ja as M,N as _,Nb as U,O as S,P as v,Pa as e,Q as E,Qa as x,Ra as y,Sa as D,Ua as P,Va as V,Wa as k,Wc as J,Xc as Q,Xd as ie,Ya as G,aa as w,bd as X,ed as Y,gc as H,gd as $,hd as ee,ic as R,ka as C,mb as A,na as m,nb as K,sb as L,xa as t,xc as q,ya as n,yc as W,za as g}from"./chunk-EKESOJGZ.js";import{k as N}from"./chunk-LTV2K23E.js";var F=class{constructor(c,a){this.id=c,this.nombre=a}};var T=class{constructor(c,a,r){this.caracteristicas=c,this.page=a,this.size=r}};function Ee(l,c){if(l&1){let a=z();t(0,"tr"),e(1,`
                `),t(2,"td"),e(3),n(),e(4,`
                `),t(5,"td"),e(6),n(),e(7,`
                `),t(8,"td"),e(9,`
                  `),t(10,"button",7),p("click",function(){let o=_(a).$implicit,i=f();return S(i.modal(3,o))}),e(11,`
                    `),v(),g(12,"svg",36),e(13,`
                  `),n(),e(14,`
                  `),E(),t(15,"button",37),p("click",function(){let o=_(a).$implicit,i=f();return S(i.modal(2,o))}),e(16,`
                    `),v(),g(17,"svg",38),e(18,`
                  `),n(),e(19,`
                  `),E(),t(20,"button",39),p("click",function(){let o=_(a).$implicit,i=f();return S(i.modalEliminar(o))}),e(21,`
                    `),v(),g(22,"svg",40),e(23,`
                  `),n(),e(24,`

                `),n(),e(25,`
              `),n()}if(l&2){let a=c.$implicit;s(3),x(a.id),s(3),x(a.nombre)}}function Fe(l,c){if(l&1&&(t(0,"c-alert",41),e(1),n()),l&2){let a=f();M("color",a.type),s(),x(a.mensaje)}}function we(l,c){l&1&&(t(0,"c-input-group",29)(1,"div",30)(2,"label",42),e(3,"Id"),n(),g(4,"input",43),n()())}function Me(l,c){if(l&1&&(t(0,"c-alert",41),e(1),n()),l&2){let a=f();M("color",a.type),s(),x(a.mensaje)}}function ye(l,c){if(l&1&&(t(0,"form",44)(1,"span",45),e(2),n()()),l&2){let a=f();m("formGroup",a.formEliminar),s(2),D("Confirmar eliminar el registro: ",a.formEliminar.controls.id.value," - ",a.formEliminar.controls.nombre.value,"")}}function Be(l,c){if(l&1&&(t(0,"c-alert",41),e(1),n()),l&2){let a=f();M("color",a.type),s(),x(a.mensaje)}}function je(l,c){if(l&1){let a=z();t(0,"form",44)(1,"form",26)(2,"div",4)(3,"c-input-group",29)(4,"div",30)(5,"label",42),e(6,"Id"),n(),t(7,"input",46),p("blur",function(){_(a);let o=f();return S(o.functionsUtils.removeSpaces("nombre",o.formFiltros))}),n()()(),t(8,"c-input-group",29)(9,"div",30)(10,"label",31),e(11),n(),t(12,"input",47),p("blur",function(){_(a);let o=f();return S(o.functionsUtils.removeSpaces("nombre",o.formFiltros))}),n()()()()()()}if(l&2){let a=f();m("formGroup",a.formFiltros),s(),m("formGroup",a.formFiltros),s(10),y("Nombre ",a.modo===1?"*":"",""),s(),m("maxLength",50)}}var tt=(()=>{let c=class c{constructor(r,o,i){this.service=r,this.dataUtils=o,this.functionsUtils=i,this.deshabilitarBotones=!1,this.mostrarMensaje=!1,this.listResponse=[],this.type="",this.mensaje="",this.nombreAccion="",this.modo=0,this.deshabilitarBotones=!1,this.mostrarMensaje=!1,this.mostrarModalFiltro=!1,this.mostrarModalCrud=!1,this.mostrarModalEliminar=!1,this.pagination=new j,this.pagination.page=0,this.pagination.pageSize=10,this.pagination.maxSize=4}ngOnInit(){this.resetFormFiltros(),this.formFiltrosBK=this.formFiltros,this.resetForm(),this.getValuesByPage("","",this.pagination.page,this.pagination.pageSize)}filtrar(){this.mostrarModalFiltro=!1,this.deshabilitarBotones=!0,this.formFiltrosBK=new b({id:new h({value:this.formFiltros.controls.id.value.toString().trim(),disabled:!0}),nombre:new h({value:this.formFiltros.controls.nombre.value.toString().trim(),disabled:!0})}),this.getValuesByPage(this.formFiltrosBK.controls.id.value.toString().trim(),this.formFiltrosBK.controls.nombre.value.toString(),0,this.pagination.pageSize)}changePage(r){this.pagination.page=r,this.getValuesByPage(this.formFiltrosBK.controls.id.value.toString().trim(),this.formFiltrosBK.controls.nombre.value.toString(),this.pagination.page,this.pagination.pageSize)}changeSize(r){this.pagination.pageSize=r.value,this.getValuesByPage(this.formFiltrosBK.controls.id.value.toString().trim(),this.formFiltrosBK.controls.nombre.value.toString(),0,this.pagination.pageSize)}getValuesByPage(r,o,i,d){this.pagination.page=i+1;let u=new T(new F(r,o),i,d);this.service.mostrarSpinner=!0,this.service.getFromEntityByPage("caracteristicas",u).subscribe(I=>{this.listResponse=I.content,this.pagination.collectionSize=I.totalElements,this.service.mostrarSpinner=!1},I=>{this.service.mostrarSpinner=!1,console.error("Error al consumir Get All")})}resetFormFiltros(){this.formFiltros=new b({id:new h(""),nombre:new h("")})}resetForm(){this.form=new b({id:new h({value:"",disabled:!0}),nombre:new h("",B.required)})}llenarForm(r){this.form=new b({id:new h({value:r.id,disabled:!0}),nombre:new h(r.nombre,B.required)})}llenarFormDisabled(r){this.form=new b({id:new h({value:r.id,disabled:!0}),nombre:new h({value:r.nombre,disabled:!0},B.required)})}llenarObjeto(r){return new F(r.controls.id.value,r.controls.nombre.value.toString().trim())}modal(r,o){this.mostrarModalCrud=!0,this.modo=r,this.deshabilitarBotones=!1;let i=document.getElementById("inputCodigo");i&&i.focus(),this.modo===1?(this.nombreAccion="Agregar",this.resetForm()):this.modo===2?(this.nombreAccion="Editar",this.llenarForm(o)):this.modo===3&&(this.nombreAccion="Ver",this.llenarFormDisabled(o))}modalEliminar(r){this.nombreAccion="Eliminar",this.mostrarModalEliminar=!0,this.deshabilitarBotones=!1,this.formEliminar=new b({id:new h({value:r.id,disabled:!0}),nombre:new h({value:r.nombre,disabled:!0})})}guardar(){if(this.service.mostrarSpinner=!0,this.deshabilitarBotones=!0,this.modo===1){if(this.form&&this.form.valid){let r=this.llenarObjeto(this.form);this.service.saveEntity("caracteristicas",r).subscribe(o=>{this.type=o.error?"danger":"success",this.mensaje=o.mensaje,this.deshabilitarBotones=!0,this.mostrarMensaje=!0,this.service.mostrarSpinner=!1,setTimeout(()=>{this.mostrarMensaje=!1,this.mostrarModalCrud=!!o.error,this.deshabilitarBotones=!o.error,o.error||(this.resetFormFiltros(),this.getValuesByPage(this.formFiltros.controls.id.value.toString().trim(),this.formFiltros.controls.nombre.value.toString(),0,this.pagination.pageSize))},2e3)},o=>{this.service.mostrarSpinner=!1,this.deshabilitarBotones=!1,this.type="danger",this.mensaje="Ha ocurrido un error al insertar los datos",this.mostrarMensaje=!0,setTimeout(()=>{this.mostrarMensaje=!1},1500),console.error("Error al consumir Post")})}}else if(this.modo===2&&this.form&&this.form.valid){let r=this.llenarObjeto(this.form);this.service.editEntity("caracteristicas",r).subscribe(o=>{this.type=o.error?"danger":"success",this.mensaje=o.mensaje,this.deshabilitarBotones=!0,this.mostrarMensaje=!0,this.service.mostrarSpinner=!1,setTimeout(()=>{this.mostrarMensaje=!1,this.mostrarModalCrud=!!o.error,this.deshabilitarBotones=!o.error,o.error||(this.resetFormFiltros(),this.getValuesByPage(this.formFiltros.controls.id.value.toString().trim(),this.formFiltros.controls.nombre.value.toString(),0,this.pagination.pageSize))},2e3)},o=>{this.service.mostrarSpinner=!1,this.deshabilitarBotones=!1,this.type="danger",this.mensaje="Ha ocurrido un error al actualizar los datos",this.mostrarMensaje=!0,setTimeout(()=>{this.mostrarMensaje=!1},1500),console.error("Error al consumir Post")})}}eliminar(){return N(this,null,function*(){this.service.mostrarSpinner=!0,this.deshabilitarBotones=!0,this.service.deleteEntity("caracteristicas",this.formEliminar.controls.id.value).subscribe(r=>{this.type=r.error?"danger":"success",this.mensaje=r.mensaje,this.deshabilitarBotones=!0,this.mostrarMensaje=!0,setTimeout(()=>{this.service.mostrarSpinner=!1,this.mostrarModalEliminar=!!r.error,this.deshabilitarBotones=!1,this.mostrarMensaje=!1},2e3),this.getValuesByPage(this.formFiltrosBK.controls.id.value.toString().trim(),this.formFiltrosBK.controls.nombre.value.toString(),0,this.pagination.pageSize)},r=>{this.service.mostrarSpinner=!1,this.type="danger",this.deshabilitarBotones=!1,this.mensaje="Ha ocurrido un error al eliminar el registro",this.mostrarMensaje=!0,setTimeout(()=>{this.mostrarMensaje=!1},2e3),console.error("Error al consumir delete")})})}showModalFilters(){this.deshabilitarBotones=!1,this.nombreAccion="Filtrar",this.resetFormFiltros(),this.mostrarModalFiltro=!0}closeModal(){this.resetForm(),this.mostrarModalCrud=!1}closeModalDelete(){this.resetForm(),this.mostrarModalEliminar=!1}closeModalFilters(){this.resetFormFiltros(),this.mostrarModalFiltro=!1}};c.\u0275fac=function(o){return new(o||c)(w(re),w(_e),w(ne))},c.\u0275cmp=O({type:c,selectors:[["app-caracteristicas"]],standalone:!0,features:[G],decls:132,vars:34,consts:[["xs","12"],[1,"mb-4"],[1,"card-header"],[2,"display","flex","justify-content","space-between"],[1,"col-auto"],["cButton","","color","secondary","variant","outline","size","sm",3,"click"],["cIcon","","name","cilFilter"],["cButton","","color","success","variant","outline","size","sm",3,"click"],["cIcon","","name","cilPlus"],[1,"text-center","scroll"],["cTable","",3,"striped"],["scope","col"],[4,"ngFor","ngForOf"],[1,"row","col-12"],[1,"col-12","col-md-6",2,"margin-top","1vh","text-align","center"],[3,"pageChange","page","maxSize","pageSize","collectionSize"],[1,"col-12","col-md-6","d-flex","flex-column","flex-md-row","justify-content-end","align-items-center"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","20"],["value","50"],["value","100"],[3,"close","submit","showModal","tittle","disabledSubmit","disabledOthersButtons","showSubmit"],[1,"d-flex","justify-content-center"],[1,"col-10"],["cForm","",3,"formGroup"],[3,"color",4,"ngIf"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"col-12"],["for","nombre",1,"fw-bold"],["id","nombre","autoComplete","nombre","formControlName","nombre","cFormControl","",3,"blur","maxLength","valid"],[3,"valid"],[1,"justify-content-center","col-11"],[3,"formGroup",4,"ngIf"],["cIcon","","name","cilZoom"],["cButton","","color","info","variant","outline","size","sm",3,"click"],["cIcon","","name","cilPencil"],["cButton","","color","danger","variant","outline","size","sm",3,"click"],["cIcon","","name","cilTrash"],[3,"color"],["for","id",1,"fw-bold"],["id","id","autoComplete","id","formControlName","id","cFormControl",""],[3,"formGroup"],[2,"word-wrap","break-word"],["autoComplete","id","formControlName","id","cFormControl","",3,"blur"],["autoComplete","nombre","formControlName","nombre","cFormControl","",3,"blur","maxLength"]],template:function(o,i){o&1&&(t(0,"c-row"),e(1,`
  `),t(2,"c-col",0),e(3,`
    `),t(4,"c-card",1),e(5,`
      `),t(6,"c-card-header",2),e(7,`

        `),t(8,"div",3),e(9,`
          `),t(10,"strong"),e(11,"Caracter\xEDsticas"),n(),e(12,`
          `),t(13,"div",4),e(14,`
            `),t(15,"span"),e(16),n(),e(17,`
          `),n(),e(18,`
          `),t(19,"div"),e(20,`
            `),t(21,"button",5),p("click",function(){return i.showModalFilters()}),e(22,`
              `),v(),g(23,"svg",6),e(24,`
            `),n(),e(25,`
            `),E(),t(26,"button",7),p("click",function(){return i.modal(1,null)}),e(27,`
              `),v(),g(28,"svg",8),e(29,`
            `),n(),e(30,`
          `),n(),e(31,`
        `),n(),e(32,`
      `),n(),e(33,`
      `),E(),t(34,"c-card-body"),e(35,`
        `),t(36,"c-container"),e(37,`
          `),t(38,"div",9),e(39,`
            `),t(40,"table",10),e(41,`
              `),t(42,"thead"),e(43,`
              `),t(44,"tr"),e(45,`
                `),t(46,"th",11),e(47,"Id"),n(),e(48,`
                `),t(49,"th",11),e(50,"Nombre"),n(),e(51,`
                `),t(52,"th",11),e(53,"Acciones"),n(),e(54,`
              `),n(),e(55,`
              `),n(),e(56,`
              `),t(57,"tbody"),e(58,`
              `),C(59,Ee,26,2,"tr",12),e(60,`
              `),n(),e(61,`
            `),n(),e(62,`
          `),n(),e(63,`
          `),t(64,"div",13),e(65,`
            `),t(66,"div",14),e(67,`
              `),t(68,"div",4),e(69,`
                `),t(70,"ngb-pagination",15),k("pageChange",function(u){return V(i.pagination.page,u)||(i.pagination.page=u),u}),p("pageChange",function(u){return i.changePage(u-1)}),n(),e(71,`
              `),n(),e(72,`
            `),n(),e(73,`
            `),t(74,"div",16),e(75,`
              `),t(76,"div",4),e(77,`
                `),t(78,"span"),e(79,"Registros por p\xE1gina:"),n(),e(80,`
              `),n(),e(81,`
              `),t(82,"div",4),e(83,`
                `),t(84,"select",17),k("ngModelChange",function(u){return V(i.pagination.pageSize,u)||(i.pagination.pageSize=u),u}),p("change",function(u){return i.changeSize(u.target)}),e(85,`
                  `),t(86,"option",18),e(87,"5"),n(),e(88,`
                  `),t(89,"option",19),e(90,"10"),n(),e(91,`
                  `),t(92,"option",20),e(93,"20"),n(),e(94,`
                  `),t(95,"option",21),e(96,"50"),n(),e(97,`
                  `),t(98,"option",22),e(99,"100"),n(),e(100,`
                `),n(),e(101,`
              `),n(),e(102,`
            `),n(),e(103,`
          `),n(),e(104,`
        `),n(),e(105,`
      `),n(),e(106,`
    `),n(),e(107,`
  `),n(),e(108,`
`),n(),g(109,"app-custom-spinner"),t(110,"app-modal-crud",23),p("close",function(){return i.closeModal()})("submit",function(){return i.guardar()}),t(111,"div",24)(112,"div",25)(113,"form",26),C(114,Fe,2,2,"c-alert",27),t(115,"div",4),C(116,we,5,0,"c-input-group",28),t(117,"c-input-group",29)(118,"div",30)(119,"label",31),e(120),n(),t(121,"input",32),p("blur",function(){return i.functionsUtils.removeSpaces("nombre",i.form)}),n(),t(122,"c-form-feedback",33),e(123,"Campo requerido."),n()()()()()()()(),t(124,"app-modal-delete",23),p("close",function(){return i.closeModalDelete()})("submit",function(){return i.eliminar()}),t(125,"div",34),C(126,Me,2,2,"c-alert",27)(127,ye,3,3,"form",35),n()(),t(128,"app-modal-filters",23),p("close",function(){return i.closeModalFilters()})("submit",function(){return i.filtrar()}),t(129,"div",34),C(130,Be,2,2,"c-alert",27)(131,je,13,4,"form",35),n()()),o&2&&(s(16),y("Total: ",i.pagination.collectionSize,""),s(24),m("striped",!0),s(19),m("ngForOf",i.listResponse),s(11),P("page",i.pagination.page),m("maxSize",i.pagination.maxSize)("pageSize",i.pagination.pageSize)("collectionSize",i.pagination.collectionSize),s(14),P("ngModel",i.pagination.pageSize),s(26),m("showModal",i.mostrarModalCrud)("tittle",i.nombreAccion)("disabledSubmit",i.form.invalid||i.deshabilitarBotones)("disabledOthersButtons",i.deshabilitarBotones)("showSubmit",i.modo!==3),s(3),m("formGroup",i.form),s(),m("ngIf",i.mostrarMensaje),s(2),m("ngIf",i.modo!==1),s(4),y("Nombre ",i.modo===1?"*":"",""),s(),m("maxLength",50)("valid",i.functionsUtils.campoRequerido(i.form,"nombre","CR")==1?!1:null),s(),m("valid",!1),s(2),m("showModal",i.mostrarModalEliminar)("tittle",i.nombreAccion)("disabledSubmit",i.deshabilitarBotones)("disabledOthersButtons",i.deshabilitarBotones)("showSubmit",!0),s(2),m("ngIf",i.mostrarMensaje),s(),m("ngIf",i.formEliminar),s(),m("showModal",i.mostrarModalFiltro)("tittle",i.nombreAccion)("disabledSubmit",i.deshabilitarBotones)("disabledOthersButtons",i.deshabilitarBotones)("showSubmit",!0),s(2),m("ngIf",i.mostrarMensaje),s(),m("ngIf",i.formFiltros))},dependencies:[Z,W,Y,q,ee,$,ie,te,L,A,K,H,U,fe,me,ue,he,oe,pe,ae,se,le,Se,j,be,ve,J,Q,R,X,ge,ce,de,Ce,xe],styles:['@charset "UTF-8";ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{color:#00b3bae6!important}ngb-pagination[_ngcontent-%COMP%]     ul>li.active>a{background-color:#00b3bae6!important;border-color:#00b3ba80!important}.scroll[_ngcontent-%COMP%]{max-height:55vh;overflow:scroll}@media only screen and (max-width: 767px){td[_ngcontent-%COMP%]{word-wrap:break-word;max-width:50vw}}@media only screen and (min-width: 768px) and (max-width: 1023px){td[_ngcontent-%COMP%]{word-wrap:break-word;max-width:40vw}}@media only screen and (min-width: 1024px){td[_ngcontent-%COMP%]{word-wrap:break-word;max-width:10vw}}li[_ngcontent-%COMP%]{cursor:pointer}']});let l=c;return l})();export{tt as CaracteristicasComponent};
