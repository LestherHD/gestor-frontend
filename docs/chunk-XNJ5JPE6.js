import{a as Ce,b as Ee}from"./chunk-ERG732BP.js";import"./chunk-4A3SFJZV.js";import{a as k}from"./chunk-VCIY26X6.js";import{a as B,b as ve,c as xe}from"./chunk-XZQITE7T.js";import{a as ae}from"./chunk-ZMZLS7OO.js";import{a as re,b as oe,c as _e}from"./chunk-EXZC6WT5.js";import{b as le,c as g,d as se,e as me,f as x,i as d,k as de,l as ce,o as pe,q as ue,r as fe,s as he,t as ge,w as Se,x as be}from"./chunk-UVR4LUID.js";import"./chunk-O2EFQT4L.js";import{$ as o,Ac as W,Da as T,Dc as $,Fa as u,Ga as f,H as N,Hd as ie,Ja as M,N as C,O as E,Ob as K,P as F,Q as w,Qa as e,Ra as v,Sa as S,Ta as O,Va as z,Wa as P,Xa as V,Yc as Z,Za as G,Zc as J,Zd as ne,_c as Q,aa as y,dd as X,gd as Y,ic as L,id as ee,jd as te,ka as b,kc as R,na as m,nb as U,ob as q,tb as A,xa as t,ya as i,za as _,zc as H}from"./chunk-JIQ6X7TI.js";import{k as D}from"./chunk-LTV2K23E.js";var j=class{constructor(c,a,r){this.sucursales=c,this.page=a,this.size=r}};function we(s,c){if(s&1){let a=T();t(0,"tr"),e(1,`
                `),t(2,"td"),e(3),i(),e(4,`
                `),t(5,"td"),e(6),i(),e(7,`
                `),t(8,"td"),e(9),i(),e(10,`
                `),t(11,"td"),e(12),i(),e(13,`
                `),t(14,"td"),e(15,`
                  `),t(16,"button",7),u("click",function(){let l=C(a).$implicit,n=f();return E(n.modal(3,l))}),e(17,`
                    `),F(),_(18,"svg",41),e(19,`
                  `),i(),e(20,`
                  `),w(),t(21,"button",42),u("click",function(){let l=C(a).$implicit,n=f();return E(n.modal(2,l))}),e(22,`
                    `),F(),_(23,"svg",43),e(24,`
                  `),i(),e(25,`
                  `),w(),t(26,"button",44),u("click",function(){let l=C(a).$implicit,n=f();return E(n.modalEliminar(l))}),e(27,`
                    `),F(),_(28,"svg",45),e(29,`
                  `),i(),e(30,`

                `),i(),e(31,`
              `),i()}if(s&2){let a=c.$implicit,r=f();o(3),v(a.id),o(3),v(a.nombre),o(3),v(a.descripcion),o(3),v(r.dataUtils.descripcionPorCodigo(a.departamento))}}function ye(s,c){if(s&1&&(t(0,"c-alert",46),e(1),i()),s&2){let a=f();M("color",a.type),o(),v(a.mensaje)}}function Me(s,c){s&1&&(t(0,"c-input-group",29)(1,"div",30)(2,"label",47),e(3,"Id"),i(),_(4,"input",48),i()())}function Be(s,c){if(s&1&&(t(0,"option",49),e(1),i()),s&2){let a=c.$implicit,r=f();m("value",a.codigo),o(),S(" ",r.dataUtils.descripcionPorCodigo(a.codigo)," ")}}function je(s,c){if(s&1&&(t(0,"c-alert",46),e(1),i()),s&2){let a=f();M("color",a.type),o(),v(a.mensaje)}}function Ie(s,c){if(s&1&&(t(0,"form",50)(1,"span",51),e(2),i()()),s&2){let a=f();m("formGroup",a.formEliminar),o(2),O("Confirmar eliminar el registro: ",a.formEliminar.controls.id.value," - ",a.formEliminar.controls.nombre.value,"")}}function Te(s,c){if(s&1&&(t(0,"c-alert",46),e(1),i()),s&2){let a=f();M("color",a.type),o(),v(a.mensaje)}}function ze(s,c){if(s&1&&(t(0,"option",49),e(1),i()),s&2){let a=c.$implicit,r=f(2);m("value",a.codigo),o(),S(" ",r.dataUtils.descripcionPorCodigo(a.codigo)," ")}}function Pe(s,c){if(s&1){let a=T();t(0,"form",50)(1,"form",26)(2,"div",4)(3,"c-input-group",29)(4,"div",30)(5,"label",47),e(6,"Id"),i(),t(7,"input",52),u("blur",function(){C(a);let l=f();return E(l.functionsUtils.removeSpaces("nombre",l.formFiltros))}),i()()(),t(8,"c-input-group",29)(9,"div",30)(10,"label",31),e(11),i(),t(12,"input",53),u("blur",function(){C(a);let l=f();return E(l.functionsUtils.removeSpaces("nombre",l.formFiltros))}),i()()(),t(13,"c-input-group",29)(14,"div",30)(15,"label",36),e(16),i(),t(17,"select",54),b(18,ze,2,2,"option",38),i()()()()()()}if(s&2){let a=f();m("formGroup",a.formFiltros),o(),m("formGroup",a.formFiltros),o(10),S("Nombre ",a.modo===1?"*":"",""),o(),m("maxLength",70),o(4),S("Departamento ",a.modo===1?"*":"",""),o(2),m("ngForOf",a.dataUtils.listaDepartamentos)}}var nt=(()=>{let c=class c{constructor(r,l,n){this.service=r,this.dataUtils=l,this.functionsUtils=n,this.deshabilitarBotones=!1,this.mostrarMensaje=!1,this.listResponse=[],this.type="",this.mensaje="",this.nombreAccion="",this.modo=0,this.deshabilitarBotones=!1,this.mostrarMensaje=!1,this.mostrarModalFiltro=!1,this.mostrarModalCrud=!1,this.mostrarModalEliminar=!1,this.pagination=new B,this.pagination.page=0,this.pagination.pageSize=10,this.pagination.maxSize=4}ngOnInit(){this.resetFormFiltros(),this.formFiltrosBK=this.formFiltros,this.resetForm(),this.getValuesByPage("","","",this.pagination.page,this.pagination.pageSize)}filtrar(){this.mostrarModalFiltro=!1,this.deshabilitarBotones=!0,this.formFiltrosBK=new x({id:new d({value:this.formFiltros.controls.id.value.toString().trim(),disabled:!0}),nombre:new d({value:this.formFiltros.controls.nombre.value.toString().trim(),disabled:!0}),departamento:new d({value:this.formFiltros.controls.departamento.value.toString().trim(),disabled:!0})}),this.getValuesByPage(this.formFiltrosBK.controls.id.value.toString().trim(),this.formFiltrosBK.controls.nombre.value.toString(),this.formFiltrosBK.controls.departamento.value.toString().trim(),0,this.pagination.pageSize)}changePage(r){this.pagination.page=r,this.getValuesByPage(this.formFiltrosBK.controls.id.value.toString().trim(),this.formFiltrosBK.controls.nombre.value.toString(),this.formFiltrosBK.controls.departamento.value.toString().trim(),this.pagination.page,this.pagination.pageSize)}changeSize(r){this.pagination.pageSize=r.value,this.getValuesByPage(this.formFiltrosBK.controls.id.value.toString().trim(),this.formFiltrosBK.controls.nombre.value.toString(),this.formFiltrosBK.controls.departamento.value.toString().trim(),0,this.pagination.pageSize)}getValuesByPage(r,l,n,p,h){this.pagination.page=p+1;let Fe=new j(new k(r,l,"",n===""?null:n),p,h);this.service.mostrarSpinner=!0,this.service.getFromEntityByPage("sucursales",Fe).subscribe(I=>{this.listResponse=I.content,this.pagination.collectionSize=I.totalElements,this.service.mostrarSpinner=!1},I=>{this.service.mostrarSpinner=!1,console.error("Error al consumir Get All")})}resetFormFiltros(){this.formFiltros=new x({id:new d(""),nombre:new d(""),departamento:new d("")})}resetForm(){this.form=new x({id:new d({value:"",disabled:!0}),nombre:new d("",g.required),descripcion:new d("",g.required),departamento:new d("",g.required)})}llenarForm(r){this.form=new x({id:new d({value:r.id,disabled:!0}),nombre:new d(r.nombre,g.required),descripcion:new d(r.descripcion,g.required),departamento:new d(r.departamento,g.required)})}llenarFormDisabled(r){this.form=new x({id:new d({value:r.id,disabled:!0}),nombre:new d({value:r.nombre,disabled:!0},g.required),descripcion:new d({value:r.descripcion,disabled:!0},g.required),departamento:new d({value:r.departamento,disabled:!0},g.required)})}llenarObjeto(r){return new k(r.controls.id.value,r.controls.nombre.value.toString().trim(),r.controls.descripcion.value.toString().trim(),r.controls.departamento.value.toString().trim())}modal(r,l){this.mostrarModalCrud=!0,this.modo=r,this.deshabilitarBotones=!1;let n=document.getElementById("inputCodigo");n&&n.focus(),this.modo===1?(this.nombreAccion="Agregar",this.resetForm()):this.modo===2?(this.nombreAccion="Editar",this.llenarForm(l)):this.modo===3&&(this.nombreAccion="Ver",this.llenarFormDisabled(l))}modalEliminar(r){this.nombreAccion="Eliminar",this.mostrarModalEliminar=!0,this.deshabilitarBotones=!1,this.formEliminar=new x({id:new d({value:r.id,disabled:!0}),nombre:new d({value:r.nombre,disabled:!0})})}guardar(){if(this.service.mostrarSpinner=!0,this.deshabilitarBotones=!0,this.modo===1){if(this.form&&this.form.valid){let r=this.llenarObjeto(this.form);this.service.saveEntity("sucursales",r).subscribe(l=>{this.type=l.error?"danger":"success",this.mensaje=l.mensaje,this.deshabilitarBotones=!0,this.mostrarMensaje=!0,this.service.mostrarSpinner=!1,setTimeout(()=>{this.mostrarMensaje=!1,this.mostrarModalCrud=!!l.error,this.deshabilitarBotones=!l.error,l.error||(this.resetFormFiltros(),this.getValuesByPage(this.formFiltros.controls.id.value.toString().trim(),this.formFiltros.controls.nombre.value.toString(),this.formFiltros.controls.departamento.value.toString().trim(),0,this.pagination.pageSize))},2e3)},l=>{this.service.mostrarSpinner=!1,this.deshabilitarBotones=!1,this.type="danger",this.mensaje="Ha ocurrido un error al insertar los datos",this.mostrarMensaje=!0,setTimeout(()=>{this.mostrarMensaje=!1},1500),console.error("Error al consumir Post")})}}else if(this.modo===2&&this.form&&this.form.valid){let r=this.llenarObjeto(this.form);this.service.editEntity("sucursales",r).subscribe(l=>{this.type=l.error?"danger":"success",this.mensaje=l.mensaje,this.deshabilitarBotones=!0,this.mostrarMensaje=!0,this.service.mostrarSpinner=!1,setTimeout(()=>{this.mostrarMensaje=!1,this.mostrarModalCrud=!!l.error,this.deshabilitarBotones=!l.error,l.error||(this.resetFormFiltros(),this.getValuesByPage(this.formFiltros.controls.id.value.toString().trim(),this.formFiltros.controls.nombre.value.toString(),this.formFiltros.controls.departamento.value.toString().trim(),0,this.pagination.pageSize))},2e3)},l=>{this.service.mostrarSpinner=!1,this.deshabilitarBotones=!1,this.type="danger",this.mensaje="Ha ocurrido un error al actualizar los datos",this.mostrarMensaje=!0,setTimeout(()=>{this.mostrarMensaje=!1},1500),console.error("Error al consumir Post")})}}eliminar(){return D(this,null,function*(){this.service.mostrarSpinner=!0,this.deshabilitarBotones=!0,this.service.deleteEntity("sucursales",this.formEliminar.controls.id.value).subscribe(r=>{this.type=r.error?"danger":"success",this.mensaje=r.mensaje,this.deshabilitarBotones=!0,this.mostrarMensaje=!0,setTimeout(()=>{this.mostrarModalEliminar=!!r.error,this.service.mostrarSpinner=!1,this.deshabilitarBotones=!1,this.mostrarMensaje=!1},2e3),this.getValuesByPage(this.formFiltrosBK.controls.id.value.toString().trim(),this.formFiltrosBK.controls.nombre.value.toString(),this.formFiltrosBK.controls.departamento.value.toString().trim(),0,this.pagination.pageSize)},r=>{this.service.mostrarSpinner=!1,this.type="danger",this.deshabilitarBotones=!1,this.mensaje="Ha ocurrido un error al eliminar el registro",this.mostrarMensaje=!0,setTimeout(()=>{this.mostrarMensaje=!1},2e3),console.error("Error al consumir delete")})})}showModalFilters(){this.deshabilitarBotones=!1,this.nombreAccion="Filtrar",this.resetFormFiltros(),this.mostrarModalFiltro=!0}closeModal(){this.resetForm(),this.mostrarModalCrud=!1}closeModalDelete(){this.resetForm(),this.mostrarModalEliminar=!1}closeModalFilters(){this.resetFormFiltros(),this.mostrarModalFiltro=!1}};c.\u0275fac=function(l){return new(l||c)(y(oe),y(ae),y(re))},c.\u0275cmp=N({type:c,selectors:[["app-sucursales"]],standalone:!0,features:[G],decls:153,vars:41,consts:[["xs","12"],[1,"mb-4"],[1,"card-header"],[2,"display","flex","justify-content","space-between"],[1,"col-auto"],["cButton","","color","secondary","variant","outline","size","sm",3,"click"],["cIcon","","name","cilFilter"],["cButton","","color","success","variant","outline","size","sm",3,"click"],["cIcon","","name","cilPlus"],[1,"text-center","scroll"],["cTable","",3,"striped"],["scope","col"],[4,"ngFor","ngForOf"],[1,"row","col-12"],[1,"col-12","col-md-6",2,"margin-top","1vh","text-align","center"],[3,"pageChange","page","maxSize","pageSize","collectionSize"],[1,"col-12","col-md-6","d-flex","flex-column","flex-md-row","justify-content-end","align-items-center"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","20"],["value","50"],["value","100"],[3,"close","submit","showModal","tittle","disabledSubmit","disabledOthersButtons","showSubmit"],[1,"d-flex","justify-content-center"],[1,"col-10"],["cForm","",3,"formGroup"],[3,"color",4,"ngIf"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"col-12"],["for","nombre",1,"fw-bold"],["id","nombre","autoComplete","nombre","formControlName","nombre","cFormControl","",3,"blur","maxLength","valid"],[3,"valid"],["for","descripcion",1,"fw-bold"],["id","descripcion","autoComplete","descripcion","formControlName","descripcion","cFormControl","",3,"blur","maxLength","valid"],["for","departamento",1,"fw-bold"],["id","departamento","cSelect","","formControlName","departamento"],[3,"value",4,"ngFor","ngForOf"],[1,"justify-content-center","col-11"],[3,"formGroup",4,"ngIf"],["cIcon","","name","cilZoom"],["cButton","","color","info","variant","outline","size","sm",3,"click"],["cIcon","","name","cilPencil"],["cButton","","color","danger","variant","outline","size","sm",3,"click"],["cIcon","","name","cilTrash"],[3,"color"],["for","id",1,"fw-bold"],["id","id","autoComplete","id","formControlName","id","cFormControl",""],[3,"value"],[3,"formGroup"],[2,"word-wrap","break-word"],["autoComplete","id","formControlName","id","cFormControl","",3,"blur"],["autoComplete","nombre","formControlName","nombre","cFormControl","",3,"blur","maxLength"],["cSelect","","formControlName","departamento"]],template:function(l,n){l&1&&(t(0,"c-row"),e(1,`
  `),t(2,"c-col",0),e(3,`
    `),t(4,"c-card",1),e(5,`
      `),t(6,"c-card-header",2),e(7,`

        `),t(8,"div",3),e(9,`
          `),t(10,"strong"),e(11,"Sucursales"),i(),e(12,`
          `),t(13,"div",4),e(14,`
            `),t(15,"span"),e(16),i(),e(17,`
          `),i(),e(18,`
          `),t(19,"div"),e(20,`
            `),t(21,"button",5),u("click",function(){return n.showModalFilters()}),e(22,`
              `),F(),_(23,"svg",6),e(24,`
            `),i(),e(25,`
            `),w(),t(26,"button",7),u("click",function(){return n.modal(1,null)}),e(27,`
              `),F(),_(28,"svg",8),e(29,`
            `),i(),e(30,`
          `),i(),e(31,`
        `),i(),e(32,`
      `),i(),e(33,`
      `),w(),t(34,"c-card-body"),e(35,`
        `),t(36,"c-container"),e(37,`
          `),t(38,"div",9),e(39,`
            `),t(40,"table",10),e(41,`
              `),t(42,"thead"),e(43,`
              `),t(44,"tr"),e(45,`
                `),t(46,"th",11),e(47,"Id"),i(),e(48,`
                `),t(49,"th",11),e(50,"Nombre"),i(),e(51,`
                `),t(52,"th",11),e(53,"Descripci\xF3n"),i(),e(54,`
                `),t(55,"th",11),e(56,"Departamento"),i(),e(57,`
                `),t(58,"th",11),e(59,"Acciones"),i(),e(60,`
              `),i(),e(61,`
              `),i(),e(62,`
              `),t(63,"tbody"),e(64,`
              `),b(65,we,32,4,"tr",12),e(66,`
              `),i(),e(67,`
            `),i(),e(68,`
          `),i(),e(69,`
          `),t(70,"div",13),e(71,`
            `),t(72,"div",14),e(73,`
              `),t(74,"div",4),e(75,`
                `),t(76,"ngb-pagination",15),V("pageChange",function(h){return P(n.pagination.page,h)||(n.pagination.page=h),h}),u("pageChange",function(h){return n.changePage(h-1)}),i(),e(77,`
              `),i(),e(78,`
            `),i(),e(79,`
            `),t(80,"div",16),e(81,`
              `),t(82,"div",4),e(83,`
                `),t(84,"span"),e(85,"Registros por p\xE1gina:"),i(),e(86,`
              `),i(),e(87,`
              `),t(88,"div",4),e(89,`
                `),t(90,"select",17),V("ngModelChange",function(h){return P(n.pagination.pageSize,h)||(n.pagination.pageSize=h),h}),u("change",function(h){return n.changeSize(h.target)}),e(91,`
                  `),t(92,"option",18),e(93,"5"),i(),e(94,`
                  `),t(95,"option",19),e(96,"10"),i(),e(97,`
                  `),t(98,"option",20),e(99,"20"),i(),e(100,`
                  `),t(101,"option",21),e(102,"50"),i(),e(103,`
                  `),t(104,"option",22),e(105,"100"),i(),e(106,`
                `),i(),e(107,`
              `),i(),e(108,`
            `),i(),e(109,`
          `),i(),e(110,`


        `),i(),e(111,`
      `),i(),e(112,`
    `),i(),e(113,`
  `),i(),e(114,`
`),i(),_(115,"app-custom-spinner"),t(116,"app-modal-crud",23),u("close",function(){return n.closeModal()})("submit",function(){return n.guardar()}),t(117,"div",24)(118,"div",25)(119,"form",26),b(120,ye,2,2,"c-alert",27),t(121,"div",4),b(122,Me,5,0,"c-input-group",28),t(123,"c-input-group",29)(124,"div",30)(125,"label",31),e(126),i(),t(127,"input",32),u("blur",function(){return n.functionsUtils.removeSpaces("nombre",n.form)}),i(),t(128,"c-form-feedback",33),e(129,"Campo requerido."),i()()(),t(130,"c-input-group",29)(131,"div",30)(132,"label",34),e(133),i(),t(134,"textarea",35),u("blur",function(){return n.functionsUtils.removeSpaces("descripcion",n.form)}),i(),t(135,"c-form-feedback",33),e(136,"Campo requerido."),i()()(),t(137,"c-input-group",29)(138,"div",30)(139,"label",36),e(140),i(),t(141,"select",37),b(142,Be,2,2,"option",38),i(),t(143,"c-form-feedback",33),e(144,"Campo requerido."),i()()()()()()()(),t(145,"app-modal-delete",23),u("close",function(){return n.closeModalDelete()})("submit",function(){return n.eliminar()}),t(146,"div",39),b(147,je,2,2,"c-alert",27)(148,Ie,3,3,"form",40),i()(),t(149,"app-modal-filters",23),u("close",function(){return n.closeModalFilters()})("submit",function(){return n.filtrar()}),t(150,"div",39),b(151,Te,2,2,"c-alert",27)(152,Pe,19,6,"form",40),i()()),l&2&&(o(16),S("Total: ",n.pagination.collectionSize,""),o(24),m("striped",!0),o(25),m("ngForOf",n.listResponse),o(11),z("page",n.pagination.page),m("maxSize",n.pagination.maxSize)("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.collectionSize),o(14),z("ngModel",n.pagination.pageSize),o(26),m("showModal",n.mostrarModalCrud)("tittle",n.nombreAccion)("disabledSubmit",n.form.invalid||n.deshabilitarBotones)("disabledOthersButtons",n.deshabilitarBotones)("showSubmit",n.modo!==3),o(3),m("formGroup",n.form),o(),m("ngIf",n.mostrarMensaje),o(2),m("ngIf",n.modo!==1),o(4),S("Nombre ",n.modo===1?"*":"",""),o(),m("maxLength",70)("valid",n.functionsUtils.campoRequerido(n.form,"nombre","CR")==1?!1:null),o(),m("valid",!1),o(5),S("Descripci\xF3n ",n.modo===1?"*":"",""),o(),m("maxLength",160)("valid",n.functionsUtils.campoRequerido(n.form,"descripcion","CR")==1?!1:null),o(),m("valid",!1),o(5),S("Departamento ",n.modo===1?"*":"",""),o(2),m("ngForOf",n.dataUtils.listaDepartamentos),o(),m("valid",!1),o(2),m("showModal",n.mostrarModalEliminar)("tittle",n.nombreAccion)("disabledSubmit",n.deshabilitarBotones)("disabledOthersButtons",n.deshabilitarBotones)("showSubmit",!0),o(2),m("ngIf",n.mostrarMensaje),o(),m("ngIf",n.formEliminar),o(),m("showModal",n.mostrarModalFiltro)("tittle",n.nombreAccion)("disabledSubmit",n.deshabilitarBotones)("disabledOthersButtons",n.deshabilitarBotones)("showSubmit",!0),o(2),m("ngIf",n.mostrarMensaje),o(),m("ngIf",n.formFiltros))},dependencies:[$,W,Y,H,te,ee,ne,ie,A,U,q,L,K,Se,ce,he,ge,le,fe,se,me,de,Q,ve,B,_e,xe,Z,J,R,X,be,pe,ue,Ce,Ee],styles:['@charset "UTF-8";ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{color:#00b3bae6!important}ngb-pagination[_ngcontent-%COMP%]     ul>li.active>a{background-color:#00b3bae6!important;border-color:#00b3ba80!important}.scroll[_ngcontent-%COMP%]{max-height:55vh;overflow:scroll}@media only screen and (max-width: 767px){td[_ngcontent-%COMP%]{word-wrap:break-word;max-width:50vw}}@media only screen and (min-width: 768px) and (max-width: 1023px){td[_ngcontent-%COMP%]{word-wrap:break-word;max-width:40vw}}@media only screen and (min-width: 1024px){td[_ngcontent-%COMP%]{word-wrap:break-word;max-width:10vw}}li[_ngcontent-%COMP%]{cursor:pointer}']});let s=c;return s})();export{nt as SucursalesComponent};
