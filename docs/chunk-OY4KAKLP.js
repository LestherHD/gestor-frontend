import{a as q,b as M,c as K}from"./chunk-EXZC6WT5.js";import{b as j,c as d,d as A,e as P,f as V,i as g,l as H,o as J,q as W,x as z}from"./chunk-UVR4LUID.js";import{$ as n,Ab as S,Ac as L,Cc as B,Fa as u,Fb as k,H as v,Qa as i,Xc as D,Yc as T,Za as C,Zc as w,_a as b,aa as p,dd as N,ed as U,gd as R,ic as E,id as G,jd as O,ka as f,kc as I,na as a,ob as F,pb as _,tb as y,xa as t,ya as r,za as h,zc as x}from"./chunk-JIQ6X7TI.js";import"./chunk-LTV2K23E.js";var Q=()=>({"minWidth.%":44});function X(m,c){m&1&&(t(0,"c-alert",22),i(1,"Usuario o contrase\xF1a inv\xE1lidos"),r())}var ue=(()=>{let c=class c{constructor(l,s,e,o){this.service=l,this.router=s,this.functionsUtils=e,this.titleService=o,this.mostrarError=!1,localStorage.removeItem("usuario")}ngOnInit(){this.service.mostrarSpinner=!1,this.service.deshabilitarBotones=!1;let l=localStorage.getItem("usuario");this.loginForm=new V({usuario:new g("",d.required),contrasenia:new g("",d.required)}),this.titleService.setTitle("Holandesa")}login(){let l=this.loginForm.controls.usuario.value,s=this.loginForm.controls.contrasenia.value,e=[{fieldName:"usuarioOCorreo",value:l},{fieldName:"contrasenia",value:this.service.hashMD5(s)}];this.service.mostrarSpinner=!0,this.service.deshabilitarBotones=!0,this.service.getItemsFromEntityByFields("usuarios","login",e).subscribe(o=>{o?(localStorage.setItem("usuario",JSON.stringify(l)),this.functionsUtils.navigateOption(this.router,"dashboard"),this.service.mostrarSpinner=!1):(this.mostrarError=!0,this.service.mostrarSpinner=!1,this.service.deshabilitarBotones=!1)},o=>{this.service.deshabilitarBotones=!1,this.service.mostrarSpinner=!1,console.error(o)})}registrarse(){this.functionsUtils.navigateOption(this.router,"register")}recuperarContrasenia(){this.functionsUtils.navigateOption(this.router,"recover-password")}campoRequerido(l,s){return l.controls[s].value.trim()===""&&l.controls[s].touched?1:0}};c.\u0275fac=function(s){return new(s||c)(p(M),p(k),p(q),p(S))},c.\u0275cmp=v({type:c,selectors:[["app-login"]],standalone:!0,features:[C],decls:44,vars:14,consts:[[1,"bg-light","dark:bg-transparent","min-vh-100","d-flex","flex-row","align-items-center"],["breakpoint","md"],[1,"justify-content-center"],["lg","10","xl","8"],[1,"p-4"],["cForm","",3,"formGroup"],[1,"text-body-secondary"],["color","danger",4,"ngIf"],[1,"mb-2"],[3,"cFormFloating"],["id","usuario","autoComplete","username","formControlName","usuario","cFormControl","","placeholder","Usuario o correo",3,"keyup.enter","blur","maxLength","valid"],["cLabel","","for","usuario"],[3,"valid"],["id","contrasenia","autoComplete","current-password","cFormControl","","formControlName","contrasenia","placeholder","Contrase\xF1a","type","password",3,"keyup.enter","blur","maxLength","valid"],["cLabel","","for","contrasenia"],["xs","6"],["cButton","","color","primary",1,"px-4",3,"click","disabled"],["xs","6",1,"text-right"],["cButton","","color","link",1,"px-0",3,"click"],[1,"text-white","bg-holandesa","py-5",3,"ngStyle"],[1,"text-center"],["cButton","","color","primary","routerLink","/register",1,"mt-3",3,"click","active"],["color","danger"]],template:function(s,e){s&1&&(t(0,"div",0)(1,"c-container",1)(2,"c-row",2)(3,"c-col",3)(4,"c-card-group")(5,"c-card",4)(6,"c-card-body")(7,"form",5)(8,"h1"),i(9,"Bienvenido"),r(),t(10,"p",6),i(11,"Inicia sesi\xF3n con tu usuario o correo electr\xF3nico"),r(),f(12,X,2,0,"c-alert",7),t(13,"c-input-group",8)(14,"div",9)(15,"input",10),u("keyup.enter",function(){return e.login()})("blur",function(){return e.functionsUtils.removeSpaces("usuario",e.loginForm)}),r(),t(16,"label",11),i(17,"Usuario"),r(),t(18,"c-form-feedback",12),i(19,"Campo requerido."),r()()(),t(20,"c-input-group",8)(21,"div",9)(22,"input",13),u("keyup.enter",function(){return e.login()})("blur",function(){return e.functionsUtils.removeSpaces("contrasenia",e.loginForm)}),r(),t(23,"label",14),i(24,"Contrase\xF1a"),r(),t(25,"c-form-feedback",12),i(26,"Campo requerido."),r()()(),t(27,"c-row")(28,"c-col",15)(29,"button",16),u("click",function(){return e.login()}),i(30," Iniciar sesi\xF3n "),r()(),t(31,"c-col",17)(32,"a",18),u("click",function(){return e.recuperarContrasenia()}),i(33," \xBFPerdiste tu contrase\xF1a? "),r()()()()()(),t(34,"c-card",19)(35,"c-card-body",20)(36,"div")(37,"h2"),i(38,"\xDAnete"),r(),t(39,"p"),i(40," Si a\xFAn no est\xE1s registrado, crea una cuenta con nosotros. "),r(),t(41,"button",21),u("click",function(){return e.registrarse()}),i(42," \xA1Registrarse ahora! "),r()()()()()()()()(),h(43,"app-custom-spinner")),s&2&&(n(7),a("formGroup",e.loginForm),n(5),a("ngIf",e.mostrarError),n(2),a("cFormFloating",!0),n(),a("maxLength",25)("valid",e.functionsUtils.campoRequerido(e.loginForm,"usuario","CR")==1?!1:null),n(3),a("valid",!1),n(3),a("cFormFloating",!0),n(),a("maxLength",35)("valid",e.functionsUtils.campoRequerido(e.loginForm,"contrasenia","CR")==1?!1:null),n(3),a("valid",!1),n(4),a("disabled",e.loginForm.invalid||e.service.deshabilitarBotones),n(5),a("ngStyle",b(13,Q)),n(7),a("active",!0))},dependencies:[R,O,G,B,x,L,D,w,N,E,_,I,y,F,z,H,j,A,P,J,W,T,U,K],styles:["button[_ngcontent-%COMP%]    {background-color:#00b3ba!important;border-color:#00b3ba!important}.bg-holandesa[_ngcontent-%COMP%]{background-color:#00b3bab3!important}"]});let m=c;return m})();export{ue as LoginComponent};
