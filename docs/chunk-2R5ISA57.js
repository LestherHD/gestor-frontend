import{a as oe}from"./chunk-C6TJHT6G.js";import{a as J}from"./chunk-SFFDIBI7.js";import{a as K,b as ie}from"./chunk-IJSKCPDW.js";import{c as Q,d as v,e as W,f as X,g as Y,j as _,m as Z,p as ee,r as te,y as re}from"./chunk-GWKOQUCK.js";import{Ea as i,Eb as U,Fa as o,Ga as F,Ka as R,Lb as q,M as w,Ma as d,Na as u,Oc as A,Pc as D,Qa as k,Qb as L,T as p,U as f,Xa as l,Ya as T,eb as V,fa as a,ga as h,kd as B,ld as M,md as G,ra as g,sd as O,td as $,ua as r,vd as H,xc as N,xd as P,yd as z,zb as I,zc as j}from"./chunk-VQT32GZP.js";import{k as E}from"./chunk-LTV2K23E.js";var b=class{constructor(m,t,n,e,c,C,x,S,y){this.id=m,this.usuario=t,this.contrasenia=n,this.nombres=e,this.apellidos=c,this.correo=C,this.telefono=x,this.sucursal=S,this.principal=y}};function ae(s,m){if(s&1&&(i(0,"c-alert",31),l(1),o()),s&2){let t=u(2);k("color",t.tipoAlerta),a(),T(t.mensaje)}}function se(s,m){s&1&&(i(0,"c-form-feedback",13),l(1,"Campo requerido."),o()),s&2&&r("valid",!1)}function le(s,m){s&1&&(i(0,"c-form-feedback",13),l(1,"Solo se permiten valores num\xE9ricos del 0 al 9 con longitud m\xE1xima de 8 car\xE1cteres"),o()),s&2&&r("valid",!1)}function ce(s,m){s&1&&(i(0,"c-form-feedback",13),l(1,"Campo requerido."),o()),s&2&&r("valid",!1)}function me(s,m){s&1&&(i(0,"c-form-feedback",13),l(1,"Correo inv\xE1lido."),o()),s&2&&r("valid",!1)}function ue(s,m){if(s&1){let t=R();i(0,"form",6)(1,"h1"),l(2,"Registrarse"),o(),i(3,"p",7),l(4,"Crea tu cuenta"),o(),g(5,ae,2,2,"c-alert",8),i(6,"c-input-group",9)(7,"div",10)(8,"input",11),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("nombres",e.form))}),o(),i(9,"label",12),l(10,"Nombres"),o(),i(11,"c-form-feedback",13),l(12,"Campo requerido."),o()()(),i(13,"c-input-group",9)(14,"div",10)(15,"input",14),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("apellidos",e.form))}),o(),i(16,"label",15),l(17,"Apellidos"),o(),i(18,"c-form-feedback",13),l(19,"Campo requerido."),o()()(),i(20,"c-input-group",9)(21,"div",10)(22,"input",16),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("telefono",e.form))}),o(),i(23,"label",17),l(24,"Tel\xE9fono"),o(),g(25,se,2,1,"c-form-feedback",18)(26,le,2,1,"c-form-feedback",18),o()(),i(27,"c-input-group",9)(28,"div",10)(29,"input",19),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("correo",e.form))}),o(),i(30,"label",20),l(31,"Correo"),o(),g(32,ce,2,1,"c-form-feedback",18)(33,me,2,1,"c-form-feedback",18),o()(),i(34,"c-input-group",9)(35,"div",10)(36,"input",21),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("usuario",e.form))}),o(),i(37,"label",22),l(38,"Usuario"),o(),i(39,"c-form-feedback",13),l(40,"Campo requerido."),o()()(),i(41,"c-input-group",9)(42,"div",10)(43,"input",23),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("contrasenia",e.form))})("keyup",function(e){p(t);let c=u();return f(c.validarRepetirContrasenia(e))}),o(),i(44,"label",24),l(45,"Contrase\xF1a"),o(),i(46,"c-form-feedback",13),l(47,"Campo requerido."),o()()(),i(48,"c-input-group",9)(49,"div",10)(50,"input",25),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("confirmarContrasenia",e.form))})("keyup",function(e){p(t);let c=u();return f(c.validarRepetirContrasenia(e))}),o(),i(51,"label",26),l(52,"Confirmar contrase\xF1a"),o(),i(53,"c-form-feedback",13),l(54,"Campo requerido."),o()()(),i(55,"div",27)(56,"button",28),d("click",function(){p(t);let e=u();return f(e.registrarse())}),l(57,"Crear cuenta"),o()(),i(58,"div",29)(59,"c-col")(60,"a",30),d("click",function(){p(t);let e=u();return f(e.login())}),l(61," Iniciar sesi\xF3n "),o()()()()}if(s&2){let t=u();r("formGroup",t.form),a(5),r("ngIf",t.mostrarError),a(2),r("cFormFloating",!0),a(),r("valid",t.functionsUtils.campoRequerido(t.form,"nombres","CR")==1?!1:null)("maxLength",70),a(3),r("valid",!1),a(3),r("cFormFloating",!0),a(),r("valid",t.functionsUtils.campoRequerido(t.form,"apellidos","CR")==1?!1:null)("maxLength",60),a(3),r("valid",!1),a(3),r("cFormFloating",!0),a(),r("valid",t.functionsUtils.campoRequerido(t.form,"telefono","CR")==1||t.functionsUtils.campoRequerido(t.form,"telefono","TI")==3?!1:null)("maxLength",8),a(3),r("ngIf",t.functionsUtils.getValueMap("telefono")==1),a(),r("ngIf",t.functionsUtils.getValueMap("telefono")==3),a(2),r("cFormFloating",!0),a(),r("valid",t.functionsUtils.campoRequerido(t.form,"correo","CR")==1||t.functionsUtils.campoRequerido(t.form,"correo","EI")==2?!1:null)("maxLength",60),a(3),r("ngIf",t.functionsUtils.getValueMap("correo")===1),a(),r("ngIf",t.functionsUtils.getValueMap("correo")===2),a(2),r("cFormFloating",!0),a(),r("valid",t.functionsUtils.campoRequerido(t.form,"usuario","CR")==1?!1:null)("maxLength",25),a(3),r("valid",!1),a(3),r("cFormFloating",!0),a(),r("valid",t.functionsUtils.campoRequerido(t.form,"contrasenia","CR")==1?!1:null)("maxLength",35),a(3),r("valid",!1),a(3),r("cFormFloating",!0),a(),r("valid",t.functionsUtils.campoRequerido(t.form,"confirmarContrasenia","CR")==1?!1:null)("maxLength",35),a(3),r("valid",!1),a(3),r("disabled",t.form.invalid||t.contraseniasNoIguales||t.mostrarError||t.service.deshabilitarBotones)}}function pe(s){let m=s.value;return/^[0-9\s]+$/.test(m)?null:{onlyNumbersAndSpaces:!0}}var Ve=(()=>{let m=class m{constructor(n,e,c,C){this.service=n,this.router=e,this.functionsUtils=c,this.titleService=C,this.mostrarError=!1,this.mensaje="",this.tipoAlerta=""}ngOnInit(){return E(this,null,function*(){this.service.mostrarSpinner=!1,this.service.deshabilitarBotones=!1,this.form=new Y({nombres:new _("",v.required),apellidos:new _("",v.required),telefono:new _("",[v.required,pe,v.minLength(8)]),correo:new _("",[v.email,v.required]),usuario:new _("",v.required),contrasenia:new _("",v.required),confirmarContrasenia:new _("",v.required)}),this.contraseniasNoIguales=!1,this.titleService.setTitle("Holandesa")})}validarRepetirContrasenia(n){let e=this.form.controls.contrasenia.value,c=this.form.controls.confirmarContrasenia.value;clearTimeout(this.timer),this.timer=setTimeout(()=>{e&&c?e!=c?(this.mensaje="Las contrase\xF1as no coinciden",this.tipoAlerta="danger",this.mostrarError=!0,this.contraseniasNoIguales=!0):(this.mensaje="",this.tipoAlerta="",this.mostrarError=!1,this.contraseniasNoIguales=!1):(this.tipoAlerta="",this.mostrarError=!1,this.mensaje="",this.contraseniasNoIguales=!1)},0)}llenarObjeto(n){let c=this.form.controls.usuario.value.toString().trim().toLowerCase(),C=this.service.hashMD5(this.form.controls.contrasenia.value.toString().trim()),x=this.form.controls.nombres.value.toString().trim(),S=this.form.controls.apellidos.value.toString().trim(),y=this.form.controls.telefono.value.toString().trim(),ne=this.form.controls.correo.value.toString().trim().toLowerCase();return new b(0,c,C,x,S,ne,y,null,null)}campoRequerido(n,e){return n.controls[e].value.trim()===""&&n.controls[e].touched?1:n.controls[e]?.touched&&n.controls[e]?.hasError("email")?2:n.controls[e].touched&&(!/^[0-9\s]+$/.test(n.controls[e].value.trim())||n.controls[e].value.length<8)?3:0}registrarse(){return E(this,null,function*(){let n=this.llenarObjeto(this.form),e=new oe("","","","",null,n,0,0);this.mostrarError=!1,this.mensaje="",this.mostrarError||(this.service.deshabilitarBotones=!0,this.service.mostrarSpinner=!0,this.service.saveEntity("usuarios",n).subscribe(c=>{this.service.mostrarSpinner=!1,c?(this.mensaje=c.respuesta,this.mostrarError=!0,this.tipoAlerta=c.error?"danger":"success",console.log("this.tipoAlerta: ",this.tipoAlerta),clearTimeout(this.timer),this.timer=setTimeout(()=>{this.mostrarError=!1,this.service.deshabilitarBotones=!1,c.error||this.functionsUtils.navigateOption(this.router,"login")},2400)):(this.service.mostrarSpinner=!1,this.mostrarError=!0,this.service.deshabilitarBotones=!1)},c=>{this.service.deshabilitarBotones=!1,this.service.mostrarSpinner=!1,console.error(c)}))})}login(){this.functionsUtils.navigateOption(this.router,"login")}};m.\u0275fac=function(e){return new(e||m)(h(K),h(L),h(J),h(q))},m.\u0275cmp=w({type:m,selectors:[["app-register"]],standalone:!0,features:[V],decls:8,vars:1,consts:[[1,"bg-light","dark:bg-transparent","min-vh-100","d-flex","flex-row","align-items-center"],[1,"justify-content-center"],["lg","7","md","9","xl","6"],[1,"mx-4"],[1,"p-4"],["cForm","",3,"formGroup",4,"ngIf"],["cForm","",3,"formGroup"],[1,"text-body-secondary"],[3,"color",4,"ngIf"],[1,"mb-2"],[3,"cFormFloating"],["id","nombres","autoComplete","name","cFormControl","","placeholder","Nombres","formControlName","nombres",3,"blur","valid","maxLength"],["cLabel","","for","nombres"],[3,"valid"],["id","apellidos","autoComplete","name","cFormControl","","placeholder","Apellidos","formControlName","apellidos",3,"blur","valid","maxLength"],["cLabel","","for","apellidos"],["id","telefono","autoComplete","telefono","cFormControl","","placeholder","Tel\xE9fono","formControlName","telefono",3,"blur","valid","maxLength"],["cLabel","","for","telefono"],[3,"valid",4,"ngIf"],["id","correo","autoComplete","email","type","email","cFormControl","","placeholder","Correo electr\xF3nico","formControlName","correo",3,"blur","valid","maxLength"],["cLabel","","for","correo"],["id","usuario","autoComplete","name","cFormControl","","placeholder","Usuario","formControlName","usuario",3,"blur","valid","maxLength"],["cLabel","","for","usuario"],["id","contrasenia","autoComplete","new-password","cFormControl","","placeholder","Contrase\xF1a","type","password","formControlName","contrasenia",3,"blur","keyup","valid","maxLength"],["cLabel","","for","contrasenia"],["id","confirmarContrasenia","autoComplete","new-password","cFormControl","","placeholder","Confirmar contrase\xF1a","type","password","formControlName","confirmarContrasenia",3,"blur","keyup","valid","maxLength"],["cLabel","","for","confirmarContrasenia"],[1,"d-grid"],["cButton","","color","success",2,"color","white",3,"click","disabled"],[2,"margin","0 auto","text-align","center"],["cButton","","color","link",1,"px-0",3,"click"],[3,"color"]],template:function(e,c){e&1&&(i(0,"div",0)(1,"c-container")(2,"c-row",1)(3,"c-col",2)(4,"c-card",3)(5,"c-card-body",4),g(6,ue,62,33,"form",5),o()()()()()(),F(7,"app-custom-spinner")),e&2&&(a(6),r("ngIf",c.form))},dependencies:[H,z,P,A,D,B,G,O,N,j,U,I,re,Z,Q,W,X,ee,te,M,$,ie],styles:["button[_ngcontent-%COMP%]    {background-color:#00b3ba!important;border-color:#00b3ba!important}"]});let s=m;return s})();export{Ve as RegisterComponent};
