import{a as te}from"./chunk-FG5GVIZR.js";import{a as Z}from"./chunk-C6TJHT6G.js";import{a as $,b as H,c as ee}from"./chunk-IJZF6LZQ.js";import{c as P,d as v,e as z,f as J,g as K,j as _,m as Q,p as W,r as X,y as Y}from"./chunk-G72JZGS3.js";import{Ea as i,Eb as k,Fa as o,Ga as S,Ka as y,Lb as T,M as x,Ma as d,Na as u,Oc as q,Pc as L,Qa as E,Qb as V,T as p,U as f,Xa as l,Ya as w,eb as F,fa as n,ga as C,jd as N,kd as j,ld as A,ra as g,rd as D,sd as B,ua as r,ud as M,wd as G,xc as I,xd as O,zb as R,zc as U}from"./chunk-5KS4DSO7.js";import{k as b}from"./chunk-LTV2K23E.js";function ae(s,m){if(s&1&&(i(0,"c-alert",31),l(1),o()),s&2){let t=u(2);E("color",t.tipoAlerta),n(),w(t.mensaje)}}function se(s,m){s&1&&(i(0,"c-form-feedback",13),l(1,"Campo requerido."),o()),s&2&&r("valid",!1)}function le(s,m){s&1&&(i(0,"c-form-feedback",13),l(1,"Solo se permiten valores num\xE9ricos del 0 al 9 con longitud m\xE1xima de 8 car\xE1cteres"),o()),s&2&&r("valid",!1)}function ce(s,m){s&1&&(i(0,"c-form-feedback",13),l(1,"Campo requerido."),o()),s&2&&r("valid",!1)}function me(s,m){s&1&&(i(0,"c-form-feedback",13),l(1,"Correo inv\xE1lido."),o()),s&2&&r("valid",!1)}function ue(s,m){if(s&1){let t=y();i(0,"form",6)(1,"h1"),l(2,"Registrarse"),o(),i(3,"p",7),l(4,"Crea tu cuenta"),o(),g(5,ae,2,2,"c-alert",8),i(6,"c-input-group",9)(7,"div",10)(8,"input",11),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("nombres",e.form))}),o(),i(9,"label",12),l(10,"Nombres"),o(),i(11,"c-form-feedback",13),l(12,"Campo requerido."),o()()(),i(13,"c-input-group",9)(14,"div",10)(15,"input",14),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("apellidos",e.form))}),o(),i(16,"label",15),l(17,"Apellidos"),o(),i(18,"c-form-feedback",13),l(19,"Campo requerido."),o()()(),i(20,"c-input-group",9)(21,"div",10)(22,"input",16),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("telefono",e.form))}),o(),i(23,"label",17),l(24,"Tel\xE9fono"),o(),g(25,se,2,1,"c-form-feedback",18)(26,le,2,1,"c-form-feedback",18),o()(),i(27,"c-input-group",9)(28,"div",10)(29,"input",19),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("correo",e.form))}),o(),i(30,"label",20),l(31,"Correo"),o(),g(32,ce,2,1,"c-form-feedback",18)(33,me,2,1,"c-form-feedback",18),o()(),i(34,"c-input-group",9)(35,"div",10)(36,"input",21),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("usuario",e.form))}),o(),i(37,"label",22),l(38,"Usuario"),o(),i(39,"c-form-feedback",13),l(40,"Campo requerido."),o()()(),i(41,"c-input-group",9)(42,"div",10)(43,"input",23),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("contrasenia",e.form))})("keyup",function(e){p(t);let c=u();return f(c.validarRepetirContrasenia(e))}),o(),i(44,"label",24),l(45,"Contrase\xF1a"),o(),i(46,"c-form-feedback",13),l(47,"Campo requerido."),o()()(),i(48,"c-input-group",9)(49,"div",10)(50,"input",25),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("confirmarContrasenia",e.form))})("keyup",function(e){p(t);let c=u();return f(c.validarRepetirContrasenia(e))}),o(),i(51,"label",26),l(52,"Confirmar contrase\xF1a"),o(),i(53,"c-form-feedback",13),l(54,"Campo requerido."),o()()(),i(55,"div",27)(56,"button",28),d("click",function(){p(t);let e=u();return f(e.registrarse())}),l(57,"Crear cuenta"),o()(),i(58,"div",29)(59,"c-col")(60,"a",30),d("click",function(){p(t);let e=u();return f(e.login())}),l(61," Iniciar sesi\xF3n "),o()()()()}if(s&2){let t=u();r("formGroup",t.form),n(5),r("ngIf",t.mostrarError),n(2),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"nombres","CR")==1?!1:null)("maxLength",70),n(3),r("valid",!1),n(3),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"apellidos","CR")==1?!1:null)("maxLength",60),n(3),r("valid",!1),n(3),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"telefono","CR")==1||t.functionsUtils.campoRequerido(t.form,"telefono","TI")==3?!1:null)("maxLength",8),n(3),r("ngIf",t.functionsUtils.getValueMap("telefono")==1),n(),r("ngIf",t.functionsUtils.getValueMap("telefono")==3),n(2),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"correo","CR")==1||t.functionsUtils.campoRequerido(t.form,"correo","EI")==2?!1:null)("maxLength",60),n(3),r("ngIf",t.functionsUtils.getValueMap("correo")===1),n(),r("ngIf",t.functionsUtils.getValueMap("correo")===2),n(2),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"usuario","CR")==1?!1:null)("maxLength",25),n(3),r("valid",!1),n(3),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"contrasenia","CR")==1?!1:null)("maxLength",35),n(3),r("valid",!1),n(3),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"confirmarContrasenia","CR")==1?!1:null)("maxLength",35),n(3),r("valid",!1),n(3),r("disabled",t.form.invalid||t.contraseniasNoIguales||t.mostrarError||t.service.deshabilitarBotones)}}function pe(s){let m=s.value;return/^[0-9\s]+$/.test(m)?null:{onlyNumbersAndSpaces:!0}}var Te=(()=>{let m=class m{constructor(a,e,c,h){this.service=a,this.router=e,this.functionsUtils=c,this.titleService=h,this.mostrarError=!1,this.mensaje="",this.tipoAlerta=""}ngOnInit(){return b(this,null,function*(){this.service.mostrarSpinner=!1,this.service.deshabilitarBotones=!1,this.form=new K({nombres:new _("",v.required),apellidos:new _("",v.required),telefono:new _("",[v.required,pe,v.minLength(8)]),correo:new _("",[v.email,v.required]),usuario:new _("",v.required),contrasenia:new _("",v.required),confirmarContrasenia:new _("",v.required)}),this.contraseniasNoIguales=!1,this.titleService.setTitle("Holandesa")})}validarRepetirContrasenia(a){let e=this.form.controls.contrasenia.value,c=this.form.controls.confirmarContrasenia.value;clearTimeout(this.timer),this.timer=setTimeout(()=>{e&&c?e!=c?(this.mensaje="Las contrase\xF1as no coinciden",this.tipoAlerta="danger",this.mostrarError=!0,this.contraseniasNoIguales=!0):(this.mensaje="",this.tipoAlerta="",this.mostrarError=!1,this.contraseniasNoIguales=!1):(this.tipoAlerta="",this.mostrarError=!1,this.mensaje="",this.contraseniasNoIguales=!1)},0)}llenarObjeto(a){let c=this.form.controls.usuario.value.toString().trim().toLowerCase(),h=this.service.hashMD5(this.form.controls.contrasenia.value.toString().trim()),re=this.form.controls.nombres.value.toString().trim(),oe=this.form.controls.apellidos.value.toString().trim(),ie=this.form.controls.telefono.value.toString().trim(),ne=this.form.controls.correo.value.toString().trim().toLowerCase();return new te(0,c,h,re,oe,ne,ie,null,null)}campoRequerido(a,e){return a.controls[e].value.trim()===""&&a.controls[e].touched?1:a.controls[e]?.touched&&a.controls[e]?.hasError("email")?2:a.controls[e].touched&&(!/^[0-9\s]+$/.test(a.controls[e].value.trim())||a.controls[e].value.length<8)?3:0}registrarse(){return b(this,null,function*(){let a=this.llenarObjeto(this.form),e=new Z("","","","",null,a,0,0);this.mostrarError=!1,this.mensaje="",this.mostrarError||(this.service.deshabilitarBotones=!0,this.service.mostrarSpinner=!0,this.service.saveEntity("usuarios",a).subscribe(c=>{this.service.mostrarSpinner=!1,c?(this.mensaje=c.respuesta,this.mostrarError=!0,this.tipoAlerta=c.error?"danger":"success",console.log("this.tipoAlerta: ",this.tipoAlerta),clearTimeout(this.timer),this.timer=setTimeout(()=>{this.mostrarError=!1,this.service.deshabilitarBotones=!1,c.error||this.functionsUtils.navigateOption(this.router,"login")},2400)):(this.service.mostrarSpinner=!1,this.mostrarError=!0,this.service.deshabilitarBotones=!1)},c=>{this.service.deshabilitarBotones=!1,this.service.mostrarSpinner=!1,console.error(c)}))})}login(){this.functionsUtils.navigateOption(this.router,"login")}};m.\u0275fac=function(e){return new(e||m)(C(H),C(V),C($),C(T))},m.\u0275cmp=x({type:m,selectors:[["app-register"]],standalone:!0,features:[F],decls:8,vars:1,consts:[[1,"bg-light","dark:bg-transparent","min-vh-100","d-flex","flex-row","align-items-center"],[1,"justify-content-center"],["lg","7","md","9","xl","6"],[1,"mx-4"],[1,"p-4"],["cForm","",3,"formGroup",4,"ngIf"],["cForm","",3,"formGroup"],[1,"text-body-secondary"],[3,"color",4,"ngIf"],[1,"mb-2"],[3,"cFormFloating"],["id","nombres","autoComplete","name","cFormControl","","placeholder","Nombres","formControlName","nombres",3,"blur","valid","maxLength"],["cLabel","","for","nombres"],[3,"valid"],["id","apellidos","autoComplete","name","cFormControl","","placeholder","Apellidos","formControlName","apellidos",3,"blur","valid","maxLength"],["cLabel","","for","apellidos"],["id","telefono","autoComplete","telefono","cFormControl","","placeholder","Tel\xE9fono","formControlName","telefono",3,"blur","valid","maxLength"],["cLabel","","for","telefono"],[3,"valid",4,"ngIf"],["id","correo","autoComplete","email","type","email","cFormControl","","placeholder","Correo electr\xF3nico","formControlName","correo",3,"blur","valid","maxLength"],["cLabel","","for","correo"],["id","usuario","autoComplete","name","cFormControl","","placeholder","Usuario","formControlName","usuario",3,"blur","valid","maxLength"],["cLabel","","for","usuario"],["id","contrasenia","autoComplete","new-password","cFormControl","","placeholder","Contrase\xF1a","type","password","formControlName","contrasenia",3,"blur","keyup","valid","maxLength"],["cLabel","","for","contrasenia"],["id","confirmarContrasenia","autoComplete","new-password","cFormControl","","placeholder","Confirmar contrase\xF1a","type","password","formControlName","confirmarContrasenia",3,"blur","keyup","valid","maxLength"],["cLabel","","for","confirmarContrasenia"],[1,"d-grid"],["cButton","","color","success",2,"color","white",3,"click","disabled"],[2,"margin","0 auto","text-align","center"],["cButton","","color","link",1,"px-0",3,"click"],[3,"color"]],template:function(e,c){e&1&&(i(0,"div",0)(1,"c-container")(2,"c-row",1)(3,"c-col",2)(4,"c-card",3)(5,"c-card-body",4),g(6,ue,62,33,"form",5),o()()()()()(),S(7,"app-custom-spinner")),e&2&&(n(6),r("ngIf",c.form))},dependencies:[M,O,G,q,L,N,A,D,I,U,k,R,Y,Q,P,z,J,W,X,j,B,ee],styles:["button[_ngcontent-%COMP%]    {background-color:#00b3ba!important;border-color:#00b3ba!important}"]});let s=m;return s})();export{Te as RegisterComponent};
