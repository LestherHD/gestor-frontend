import{a as O,b as q,c as H}from"./chunk-D7TFSAOW.js";import{b as M,c as d,d as A,e as j,f as P,i as g,l as V,o as J,q as W,x as z}from"./chunk-4NMRZLOK.js";import{$ as o,Bc as L,Fa as u,Fb as S,H as f,Qa as i,Wc as B,Xc as D,Yc as w,Za as C,_a as b,aa as p,cd as N,dd as U,fd as T,hc as k,hd as R,id as G,jc as E,ka as v,na as n,ob as F,pb as _,tb as y,xa as t,ya as r,yc as I,za as h,zc as x}from"./chunk-52LX7MYE.js";import"./chunk-LTV2K23E.js";var K=()=>({"minWidth.%":44});function Q(m,c){m&1&&(t(0,"c-alert",22),i(1,"Usuario o contrase\xF1a inv\xE1lidos"),r())}var le=(()=>{let c=class c{constructor(s,a,e){this.service=s,this.router=a,this.functionsUtils=e,this.mostrarError=!1,localStorage.removeItem("usuario")}ngOnInit(){this.service.mostrarSpinner=!1,this.service.deshabilitarBotones=!1;let s=localStorage.getItem("usuario");this.loginForm=new P({usuario:new g("",d.required),contrasenia:new g("",d.required)})}login(){let s=this.loginForm.controls.usuario.value,a=this.loginForm.controls.contrasenia.value,e=[{fieldName:"usuarioOCorreo",value:s},{fieldName:"contrasenia",value:this.service.hashMD5(a)}];this.service.mostrarSpinner=!0,this.service.deshabilitarBotones=!0,this.service.getItemsFromEntityByFields("usuarios","login",e).subscribe(l=>{l?(localStorage.setItem("usuario",JSON.stringify(s)),this.functionsUtils.navigateOption(this.router,"dashboard"),this.service.mostrarSpinner=!1):(this.mostrarError=!0,this.service.mostrarSpinner=!1,this.service.deshabilitarBotones=!1)},l=>{this.service.deshabilitarBotones=!1,this.service.mostrarSpinner=!1,console.error(l)})}registrarse(){this.functionsUtils.navigateOption(this.router,"register")}recuperarContrasenia(){this.functionsUtils.navigateOption(this.router,"recover-password")}campoRequerido(s,a){return s.controls[a].value.trim()===""&&s.controls[a].touched?1:0}};c.\u0275fac=function(a){return new(a||c)(p(q),p(S),p(O))},c.\u0275cmp=f({type:c,selectors:[["app-login"]],standalone:!0,features:[C],decls:44,vars:14,consts:[[1,"bg-light","dark:bg-transparent","min-vh-100","d-flex","flex-row","align-items-center"],["breakpoint","md"],[1,"justify-content-center"],["lg","10","xl","8"],[1,"p-4"],["cForm","",3,"formGroup"],[1,"text-body-secondary"],["color","danger",4,"ngIf"],[1,"mb-2"],[3,"cFormFloating"],["id","usuario","autoComplete","username","formControlName","usuario","cFormControl","","placeholder","Usuario o correo",3,"keyup.enter","blur","maxLength","valid"],["cLabel","","for","usuario"],[3,"valid"],["id","contrasenia","autoComplete","current-password","cFormControl","","formControlName","contrasenia","placeholder","Contrase\xF1a","type","password",3,"keyup.enter","blur","maxLength","valid"],["cLabel","","for","contrasenia"],["xs","6"],["cButton","","color","primary",1,"px-4",3,"click","disabled"],["xs","6",1,"text-right"],["cButton","","color","link",1,"px-0",3,"click"],[1,"text-white","bg-holandesa","py-5",3,"ngStyle"],[1,"text-center"],["cButton","","color","primary","routerLink","/register",1,"mt-3",3,"click","active"],["color","danger"]],template:function(a,e){a&1&&(t(0,"div",0)(1,"c-container",1)(2,"c-row",2)(3,"c-col",3)(4,"c-card-group")(5,"c-card",4)(6,"c-card-body")(7,"form",5)(8,"h1"),i(9,"Bienvenido"),r(),t(10,"p",6),i(11,"Inicia sesi\xF3n con tu usuario o correo electr\xF3nico"),r(),v(12,Q,2,0,"c-alert",7),t(13,"c-input-group",8)(14,"div",9)(15,"input",10),u("keyup.enter",function(){return e.login()})("blur",function(){return e.functionsUtils.removeSpaces("usuario",e.loginForm)}),r(),t(16,"label",11),i(17,"Usuario"),r(),t(18,"c-form-feedback",12),i(19,"Campo requerido."),r()()(),t(20,"c-input-group",8)(21,"div",9)(22,"input",13),u("keyup.enter",function(){return e.login()})("blur",function(){return e.functionsUtils.removeSpaces("contrasenia",e.loginForm)}),r(),t(23,"label",14),i(24,"Contrase\xF1a"),r(),t(25,"c-form-feedback",12),i(26,"Campo requerido."),r()()(),t(27,"c-row")(28,"c-col",15)(29,"button",16),u("click",function(){return e.login()}),i(30," Iniciar sesi\xF3n "),r()(),t(31,"c-col",17)(32,"a",18),u("click",function(){return e.recuperarContrasenia()}),i(33," \xBFPerdiste tu contrase\xF1a? "),r()()()()()(),t(34,"c-card",19)(35,"c-card-body",20)(36,"div")(37,"h2"),i(38,"\xDAnete"),r(),t(39,"p"),i(40," Si a\xFAn no est\xE1s registrado, crea una cuenta con nosotros. "),r(),t(41,"button",21),u("click",function(){return e.registrarse()}),i(42," \xA1Registrarse ahora! "),r()()()()()()()()(),h(43,"app-custom-spinner")),a&2&&(o(7),n("formGroup",e.loginForm),o(5),n("ngIf",e.mostrarError),o(2),n("cFormFloating",!0),o(),n("maxLength",25)("valid",e.functionsUtils.campoRequerido(e.loginForm,"usuario","CR")==1?!1:null),o(3),n("valid",!1),o(3),n("cFormFloating",!0),o(),n("maxLength",35)("valid",e.functionsUtils.campoRequerido(e.loginForm,"contrasenia","CR")==1?!1:null),o(3),n("valid",!1),o(4),n("disabled",e.loginForm.invalid||e.service.deshabilitarBotones),o(5),n("ngStyle",b(13,K)),o(7),n("active",!0))},dependencies:[T,G,R,L,I,x,B,w,N,k,_,E,y,F,z,V,M,A,j,J,W,D,U,H],styles:["button[_ngcontent-%COMP%]    {background-color:#00b3ba!important;border-color:#00b3ba!important}.bg-holandesa[_ngcontent-%COMP%]{background-color:#00b3bab3!important}"]});let m=c;return m})();export{le as LoginComponent};
