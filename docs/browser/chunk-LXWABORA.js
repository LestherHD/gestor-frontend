import{a as E,c as me}from"./chunk-G4V3YEOC.js";import{a as ue}from"./chunk-GIXF4MEC.js";import{a as ce,b as pe,c as ge}from"./chunk-QTZQAGUP.js";import{c as A,i as U,x as de}from"./chunk-JSCADVZE.js";import{$ as c,$a as S,C as $,Da as I,Eb as ne,Fa as _,Ga as m,H as z,I as q,K as G,N as C,O as v,Pa as l,Qa as f,Ra as w,Sa as T,U as Q,Ua as F,Va as V,Wa as B,X as Y,Xd as le,Ya as J,aa as x,ab as Z,bb as N,db as R,gc as ie,ka as b,lb as X,mb as K,na as g,nb as ee,sb as M,tc as ae,vc as oe,xa as s,xc as re,ya as r,yc as se,za as P,zb as te}from"./chunk-EKESOJGZ.js";import{k as W}from"./chunk-LTV2K23E.js";var k=class{constructor(t,e,n,o,i,p,d,h,u,O,y){this.id=t,this.estado=e,this.nombres=n,this.apellidos=o,this.telefono=i,this.departamento=p,this.sucursal=d,this.metodoPago=h,this.detallePedido=u,this.total=O,this.fecha=y}};var D=class{constructor(t,e,n,o,i){this.pedidos=t,this.fechaInicio=e,this.fechaFin=n,this.page=o,this.size=i}};var L=class{constructor(){this.change=new Q,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(t){return t.id==null&&(t.id=this.DEFAULT_ID),this.instances[t.id]?this.updateInstance(t):(this.instances[t.id]=t,!0)}updateInstance(t){let e=!1;for(let n in this.instances[t.id])t[n]!==this.instances[t.id][n]&&(this.instances[t.id][n]=t[n],e=!0);return e}getCurrentPage(t){return this.instances[t]?this.instances[t].currentPage:1}setCurrentPage(t,e){if(this.instances[t]){let n=this.instances[t],o=Math.ceil(n.totalItems/n.itemsPerPage);e<=o&&1<=e&&(this.instances[t].currentPage=e,this.change.emit(t))}}setTotalItems(t,e){this.instances[t]&&0<=e&&(this.instances[t].totalItems=e,this.change.emit(t))}setItemsPerPage(t,e){this.instances[t]&&(this.instances[t].itemsPerPage=e,this.change.emit(t))}getInstance(t=this.DEFAULT_ID){return this.instances[t]?this.clone(this.instances[t]):{}}clone(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}},xe=Number.MAX_SAFE_INTEGER,he=(()=>{class a{constructor(e){this.service=e,this.state={}}transform(e,n){if(!(e instanceof Array)){let y=n.id||this.service.defaultId();return this.state[y]?this.state[y].slice:e}let o=n.totalItems&&n.totalItems!==e.length,i=this.createInstance(e,n),p=i.id,d,h,u=i.itemsPerPage,O=this.service.register(i);if(!o&&e instanceof Array){if(u=+u||xe,d=(i.currentPage-1)*u,h=d+u,this.stateIsIdentical(p,e,d,h))return this.state[p].slice;{let H=e.slice(d,h);return this.saveState(p,e,H,d,h),this.service.change.emit(p),H}}else return O&&this.service.change.emit(p),this.saveState(p,e,e,d,h),e}createInstance(e,n){return this.checkConfig(n),{id:n.id!=null?n.id:this.service.defaultId(),itemsPerPage:+n.itemsPerPage||0,currentPage:+n.currentPage||1,totalItems:+n.totalItems||e.length}}checkConfig(e){let o=["itemsPerPage","currentPage"].filter(i=>!(i in e));if(0<o.length)throw new Error(`PaginatePipe: Argument is missing the following required properties: ${o.join(", ")}`)}saveState(e,n,o,i,p){this.state[e]={collection:n,size:n.length,slice:o,start:i,end:p}}stateIsIdentical(e,n,o,i){let p=this.state[e];return!p||!(p.size===n.length&&p.start===o&&p.end===i)?!1:p.slice.every((h,u)=>h===n[o+u])}}return a.\u0275fac=function(e){return new(e||a)(x(L,16))},a.\u0275pipe=G({name:"paginate",type:a,pure:!1}),a})();var _e=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=q({type:a}),a.\u0275inj=$({providers:[L],imports:[[M]]}),a})();var j=(a,t)=>({"button-active":a,"button-inactive":t}),Ce=(a,t,e)=>({blue:a,yellow:t,green:e}),ve=(a,t)=>({itemsPerPage:a,currentPage:t});function Pe(a,t){if(a&1){let e=I();s(0,"c-card",9)(1,"div")(2,"div",10)(3,"h4",11),l(4),r()(),s(5,"c-card-body",12)(6,"div",13)(7,"div",14)(8,"span",15),l(9,"Departamento:"),r(),s(10,"span"),l(11),r()(),s(12,"div",14)(13,"span",15),l(14,"Sucursal:"),r(),s(15,"span"),l(16),r()(),s(17,"div",14)(18,"span",15),l(19,"Fecha:"),r(),s(20,"span"),l(21),r()(),s(22,"div",14)(23,"span",15),l(24,"Total:"),r(),s(25,"span"),l(26),r()()(),s(27,"div",16)(28,"button",17),_("click",function(){let o=C(e).$implicit,i=m();return v(i.detallePedido(o))}),l(29,"Detalle"),r(),P(30,"br"),s(31,"button",18),l(32,"Cambiar estado"),r()()(),P(33,"br"),r()()}if(a&2){let e=t.$implicit,n=m();g("ngClass",Z(6,Ce,e.estado==="N",e.estado==="P",e.estado==="E")),c(4),f(e.nombres+", "+e.apellidos),c(7),f(n.dataUtils.descripcionPorCodigo(e.departamento)),c(5),f(e.sucursal.nombre),c(5),f(n.functionsUtils.formatDateInTimeZone(e.fecha)),c(5),f("Q"+n.functionsUtils.formatPrice(e.total))}}function we(a,t){if(a&1){let e=I();s(0,"div",19)(1,"div",20)(2,"ngb-pagination",21),B("pageChange",function(o){C(e);let i=m();return V(i.pagination.page,o)||(i.pagination.page=o),v(o)}),_("pageChange",function(o){C(e);let i=m();return v(i.changePage(o-1))}),r()()()}if(a&2){let e=m();c(2),F("page",e.pagination.page),g("maxSize",e.pagination.maxSize)("pageSize",e.pagination.pageSize)("collectionSize",e.pagination.collectionSize)}}function ye(a,t){if(a&1&&(s(0,"h4"),l(1,"No existen pedidos: "),s(2,"span",15),l(3),r()()),a&2){let e=m(2);c(3),f(e.estado.value==="N"?"Nuevos":e.estado.value==="P"?"En proceso":e.estado.value==="E"?"Entregados":"")}}function Ie(a,t){if(a&1&&(s(0,"c-card",22)(1,"c-card-body",23),b(2,ye,4,1,"h4",24),r()()),a&2){let e=m();c(2),g("ngIf",e.estado)}}function Se(a,t){if(a&1&&(s(0,"tr"),P(1,"td",33),s(2,"td",34),l(3),r(),s(4,"td",34),l(5),r(),s(6,"td",34),l(7),r()()),a&2){let e=t.$implicit,n=m(2);c(),g("innerHTML",e.descripcion,Y),c(2),f(e.cantidad),c(2),w("Q",n.functionsUtils.formatPrice(e.precio),""),c(2),w("Q",n.functionsUtils.formatPrice(e.precio*e.cantidad),"")}}function Me(a,t){if(a&1){let e=I();s(0,"div",19)(1,"div",20)(2,"ngb-pagination",21),B("pageChange",function(o){C(e);let i=m(2);return V(i.paginationDetail.page,o)||(i.paginationDetail.page=o),v(o)}),_("pageChange",function(o){C(e);let i=m(2);return v(i.paginationDetail.page=o)}),r()()()}if(a&2){let e=m(2);c(2),F("page",e.paginationDetail.page),g("maxSize",e.paginationDetail.maxSize)("pageSize",e.paginationDetail.pageSize)("collectionSize",e.paginationDetail.collectionSize)}}function Ee(a,t){if(a&1&&(s(0,"div",19)(1,"div",25)(2,"div",19)(3,"div",26)(4,"span",27),l(5,"Cliente: "),r(),s(6,"span"),l(7),r()(),s(8,"div",26)(9,"span",27),l(10,"Fecha: "),r(),s(11,"span"),l(12),r()(),s(13,"div",28)(14,"span",27),l(15,"Total de pedido: "),r(),s(16,"span"),l(17),r()()(),P(18,"br"),s(19,"div",29)(20,"table",30)(21,"thead")(22,"tr")(23,"th",31),l(24,"Descripci\xF3n"),r(),s(25,"th",31),l(26,"Cantidad"),r(),s(27,"th",31),l(28,"Precio"),r(),s(29,"th",31),l(30,"Total"),r()()(),s(31,"tbody"),b(32,Se,8,4,"tr",32),N(33,"paginate"),r()()(),P(34,"br"),b(35,Me,3,4,"div",6),r()()),a&2){let e=m();c(7),T(" ",e.pedido.nombres," ",e.pedido.apellidos," "),c(5),w(" ",e.functionsUtils.formatDateInTimeZone(e.pedido.fecha)," "),c(5),w(" Q",e.functionsUtils.formatPrice(e.pedido.total)," "),c(3),g("striped",!0),c(12),g("ngForOf",R(33,7,e.listDetallePedido,S(10,ve,e.paginationDetail.pageSize,e.paginationDetail.page))),c(3),g("ngIf",e.listResponse&&e.listResponse.length)}}var gt=(()=>{let t=class t{constructor(n,o,i,p,d){this.service=n,this.functionsUtils=o,this.router=i,this.titleService=p,this.dataUtils=d,this.estadoSeleccionado="",this.pagination=new E,this.pagination.page=0,this.pagination.pageSize=30,this.pagination.maxSize=6,this.listaSucursales=[],this.mostrarModalCrud=!1,this.paginationDetail=new E,this.paginationDetail.page=0,this.paginationDetail.pageSize=7,this.paginationDetail.maxSize=6}ngOnInit(){return W(this,null,function*(){let n=localStorage.getItem("usuario"),o=JSON.parse(n),i=[{fieldName:"usuario",value:o},{fieldName:"correo",value:o}],p={usuario:o,correo:o};this.sucursalId=new U("",A.required),this.estado=new U("N",A.required),yield this.service.getFromEntityAndMethodPromise("usuarios","getByUsuarioOrCorreo",p).then(d=>{d&&d.usuario&&(this.usuario=d.usuario,this.usuario.principal==="N"&&this.sucursalId.setValue(this.usuario.sucursal.id))}).catch(d=>{console.error(d)}),this.titleService.setTitle("Holandesa"),this.getValuesByPage(Number(this.sucursalId.value.value),this.estado.value,this.pagination.page,this.pagination.pageSize),this.service.getAllItemsFromEntity("sucursales").subscribe(d=>{this.listaSucursales=d},d=>{console.error(d)})})}changePage(n){this.pagination.page=n,this.getValuesByPage(Number(this.sucursalId.value.value),this.estado.value,this.pagination.page,this.pagination.pageSize)}getValuesByPage(n,o,i,p){let d=null;this.listaSucursales&&this.listaSucursales.length>0&&(d=this.listaSucursales.find(u=>u.id===Number(this.sucursalId.value))),console.log("sucursal: ",d),this.pagination.page=i+1;let h=new D(new k(null,o,null,null,null,null,d,null,null,null,null),null,null,i,p);this.service.mostrarSpinner=!0,this.service.getFromEntityByPage("pedidos",h).subscribe(u=>{this.listResponse=u.content,this.listResponse&&this.listResponse.length>0,this.pagination.collectionSize=u.totalElements,this.service.mostrarSpinner=!1},u=>{this.service.mostrarSpinner=!1,console.error("Error al consumir Get All")})}cambiarEstado(n){this.estadoSeleccionado=n,this.estado.setValue(n),this.pagination.page=0,this.getValuesByPage(Number(this.sucursalId.value.value),this.estado.value,this.pagination.page,this.pagination.pageSize)}closeModal(){this.nombreAccion="",this.mostrarModalCrud=!1,this.listDetallePedido=[]}detallePedido(n){this.pedido=n,this.nombreAccion="Detalle de pedido",this.mostrarModalCrud=!0,this.listDetallePedido=n.detallePedido,this.paginationDetail.collectionSize=this.listDetallePedido.length}changePageDetail(n){this.paginationDetail.page=n}};t.\u0275fac=function(o){return new(o||t)(x(pe),x(ce),x(ne),x(te),x(ue))},t.\u0275cmp=z({type:t,selectors:[["app-dashboard-pedidos"]],standalone:!0,features:[J],decls:16,vars:20,consts:[[1,"d-flex","justify-content-center","grupo-botones"],["aria-label","Basic outlined example","role","group",1,"d-flex","w-100"],["cButton","",1,"flex-fill","no-border",3,"click","ngClass"],[1,"d-flex","justify-content-center","flex-column","align-items-center"],[1,"card-container","ancho-personalizado","my-5"],["class","card-item","style","color: white;",3,"ngClass",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],["class","my-5 ancho-personalizado",4,"ngIf"],[3,"close","modalSize","showModal","tittle","showSubmit"],[1,"card-item",2,"color","white",3,"ngClass"],[1,"d-flex"],[1,"fw-bold","m-2"],[1,"card-body-custom","text-center"],[1,"credits-container"],[1,"credits-item"],[1,"fw-bold"],[1,"justify-content-center",2,"padding-top","30px"],["cButton","","color","primary",1,"btn-footer","no-border","w-75",2,"margin-bottom","5px",3,"click"],["cButton","","color","primary",1,"btn-footer","no-border","w-75"],[1,"d-flex","justify-content-center"],[1,"col-auto"],[3,"pageChange","page","maxSize","pageSize","collectionSize"],[1,"my-5","ancho-personalizado"],[1,"d-flex","justify-content-center","flex-column","align-items-center","align-content-center"],[4,"ngIf"],[1,"col-12"],[1,"col-4","row","text-start"],[1,"fw-semibold"],[1,"col-14","row","text-center","align-content-center"],[1,"text-center","scroll"],["cTable","",3,"striped"],["scope","col",1,"text-start","mx-2"],[4,"ngFor","ngForOf"],[1,"text-start","mx-2",3,"innerHTML"],[1,"text-start","mx-2"]],template:function(o,i){o&1&&(s(0,"div",0)(1,"c-button-group",1)(2,"button",2),_("click",function(){return i.cambiarEstado("N")}),l(3," Nuevos "),r(),s(4,"button",2),_("click",function(){return i.cambiarEstado("P")}),l(5," En proceso "),r(),s(6,"button",2),_("click",function(){return i.cambiarEstado("E")}),l(7," Entregados "),r()()(),s(8,"div",3)(9,"c-card-body",4),b(10,Pe,34,10,"c-card",5),r(),b(11,we,3,4,"div",6)(12,Ie,3,1,"c-card",7),r(),P(13,"app-custom-spinner"),s(14,"app-modal-crud",8),_("close",function(){return i.closeModal()}),b(15,Ee,36,13,"div",6),r()),o&2&&(c(2),g("ngClass",S(11,j,i.estado.value==="N",i.estado.value!=="N")),c(2),g("ngClass",S(14,j,i.estado.value==="P",i.estado.value!=="P")),c(2),g("ngClass",S(17,j,i.estado.value==="E",i.estado.value!=="E")),c(4),g("ngForOf",i.listResponse),c(),g("ngIf",i.listResponse&&i.listResponse.length),c(),g("ngIf",!i.listResponse||i.listResponse&&i.listResponse.length===0),c(2),g("modalSize","modal-xl")("showModal",i.mostrarModalCrud)("tittle",i.nombreAccion)("showSubmit",!1),c(),g("ngIf",i.pedido))},dependencies:[ge,se,re,E,M,X,K,ee,de,ae,oe,ie,me,le,_e,he],styles:['@charset "UTF-8";.card-container[_ngcontent-%COMP%]{display:grid;gap:1rem;grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}.blue[_ngcontent-%COMP%]{background-color:#002999a6}.green[_ngcontent-%COMP%]{background-color:#008000b8}.yellow[_ngcontent-%COMP%]{background-color:#f9b115cc}.card-item[_ngcontent-%COMP%]{border-color:#0000001a;max-height:450px;box-shadow:0 0 6px #0003;transition:transform .3s ease,box-shadow 1ms ease}.card-item[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px #0003;transform:translateY(0)}.card-body-custom[_ngcontent-%COMP%]{height:100px}.credits-container[_ngcontent-%COMP%]{font-size:12px;display:flex;flex-direction:column;align-items:center;width:100%}.credits-item[_ngcontent-%COMP%]{position:relative;width:100%;margin-bottom:15px}.credits-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute}.credits-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{left:52%;transform:translate(-100%);text-align:right;padding-right:10px}.credits-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{left:48%;transform:translate(0);text-align:left;padding-left:10px}.ancho-personalizado[_ngcontent-%COMP%]{width:80%}.no-border[_ngcontent-%COMP%]{border:none;box-shadow:none}.button-inactive[_ngcontent-%COMP%]{background-color:#00b3bab3;color:#fff}.button-inactive[_ngcontent-%COMP%]:active{background-color:#00b3bab3}.button-active[_ngcontent-%COMP%]{background-color:#00b3bae6;color:#fff}.button-active[_ngcontent-%COMP%]:active{background-color:#00b3bae6}.grupo-botones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:clamp(12px,2vw,16px)}.grupo-botones[_ngcontent-%COMP%]{max-width:100%;margin:0 auto}.btn-footer[_ngcontent-%COMP%]{font-size:14px;height:50px;background-color:#ffffff4d}.btn-footer[_ngcontent-%COMP%]:hover{background-color:#ffffff80}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{color:#00b3bae6!important}ngb-pagination[_ngcontent-%COMP%]     ul>li.active>a{background-color:#00b3bae6!important;border-color:#00b3ba80!important}@media (min-width: 1351px){.card-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(23%,1fr))}.ancho-personalizado[_ngcontent-%COMP%]{width:100%}.card-body-custom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;max-width:17vw;height:100px;text-align:center;margin:0 auto}.card-title-custom[_ngcontent-%COMP%]{font-size:13px}}@media (max-width: 1350px){.card-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(30%,1fr))}.ancho-personalizado[_ngcontent-%COMP%]{width:80%}.card-body-custom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px;max-width:22vw;height:100px;text-align:center;margin:0 auto}.card-title-custom[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 992px){.card-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(31%,1fr))}.ancho-personalizado[_ngcontent-%COMP%]{width:90%}.card-body-custom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px;max-width:21vw;height:100px;text-align:center;margin:0 auto}.card-title-custom[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 768px){.card-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(48%,1fr))}.ancho-personalizado[_ngcontent-%COMP%]{width:90%}.card-body-custom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px;max-width:34vw;height:100px;text-align:center;margin:0 auto}.card-title-custom[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 576px){.card-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(49%,1fr))}.ancho-personalizado[_ngcontent-%COMP%]{width:90%}.card-body-custom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px;max-width:40vw;height:100px;text-align:center;margin:0 auto}.card-title-custom[_ngcontent-%COMP%]{font-size:12px}}.scroll[_ngcontent-%COMP%]{max-height:55vh;overflow:scroll}@media only screen and (max-width: 767px){td[_ngcontent-%COMP%]{word-wrap:break-word;max-width:60vw}}@media only screen and (min-width: 768px) and (max-width: 1023px){td[_ngcontent-%COMP%]{word-wrap:break-word;max-width:50vw}}@media only screen and (min-width: 1024px){td[_ngcontent-%COMP%]{word-wrap:break-word;max-width:20vw}}']});let a=t;return a})();export{gt as DashboardPedidosComponent};
