import{a as ie}from"./chunk-C6TJHT6G.js";import{a as J,b as K,c as oe}from"./chunk-GCH36PEF.js";import{b as Q,c as _,d as W,e as X,f as Y,i as v,l as Z,o as ee,q as te,x as re}from"./chunk-UVR4LUID.js";import{$ as n,Ab as V,Ac as B,Da as T,Fa as d,Fb as L,Ga as u,H as R,N as p,O as f,Qa as l,Ra as F,Xc as M,Yc as G,Za as U,Zc as O,aa as h,dd as A,ed as $,gd as H,ic as N,id as P,jd as z,ka as g,kc as j,na as r,ob as q,tb as I,xa as o,ya as i,za as k,zc as D}from"./chunk-JIQ6X7TI.js";import{k as w}from"./chunk-LTV2K23E.js";var x=class{constructor(m,t,a,e,c,C,b,S,y,E){this.id=m,this.usuario=t,this.contrasenia=a,this.nombres=e,this.apellidos=c,this.correo=C,this.telefono=b,this.sucursal=S,this.principal=y,this.sesion=E}};function ne(s,m){if(s&1&&(o(0,"c-alert",32),l(1),i()),s&2){let t=u(2);n(),F(t.mensaje)}}function ae(s,m){if(s&1&&(o(0,"c-alert",33),l(1),i()),s&2){let t=u(2);n(),F(t.mensaje)}}function se(s,m){s&1&&(o(0,"c-form-feedback",14),l(1,"Campo requerido."),i()),s&2&&r("valid",!1)}function le(s,m){s&1&&(o(0,"c-form-feedback",14),l(1,"Solo se permiten valores num\xE9ricos del 0 al 9 con longitud m\xE1xima de 8 car\xE1cteres"),i()),s&2&&r("valid",!1)}function ce(s,m){s&1&&(o(0,"c-form-feedback",14),l(1,"Campo requerido."),i()),s&2&&r("valid",!1)}function me(s,m){s&1&&(o(0,"c-form-feedback",14),l(1,"Correo inv\xE1lido."),i()),s&2&&r("valid",!1)}function ue(s,m){if(s&1){let t=T();o(0,"form",6)(1,"h1"),l(2,"Registrarse"),i(),o(3,"p",7),l(4,"Crea tu cuenta"),i(),g(5,ne,2,1,"c-alert",8)(6,ae,2,1,"c-alert",9),o(7,"c-input-group",10)(8,"div",11)(9,"input",12),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("nombres",e.form))}),i(),o(10,"label",13),l(11,"Nombres"),i(),o(12,"c-form-feedback",14),l(13,"Campo requerido."),i()()(),o(14,"c-input-group",10)(15,"div",11)(16,"input",15),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("apellidos",e.form))}),i(),o(17,"label",16),l(18,"Apellidos"),i(),o(19,"c-form-feedback",14),l(20,"Campo requerido."),i()()(),o(21,"c-input-group",10)(22,"div",11)(23,"input",17),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("telefono",e.form))}),i(),o(24,"label",18),l(25,"Tel\xE9fono"),i(),g(26,se,2,1,"c-form-feedback",19)(27,le,2,1,"c-form-feedback",19),i()(),o(28,"c-input-group",10)(29,"div",11)(30,"input",20),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("correo",e.form))}),i(),o(31,"label",21),l(32,"Correo"),i(),g(33,ce,2,1,"c-form-feedback",19)(34,me,2,1,"c-form-feedback",19),i()(),o(35,"c-input-group",10)(36,"div",11)(37,"input",22),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("usuario",e.form))}),i(),o(38,"label",23),l(39,"Usuario"),i(),o(40,"c-form-feedback",14),l(41,"Campo requerido."),i()()(),o(42,"c-input-group",10)(43,"div",11)(44,"input",24),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("contrasenia",e.form))})("keyup",function(e){p(t);let c=u();return f(c.validarRepetirContrasenia(e))}),i(),o(45,"label",25),l(46,"Contrase\xF1a"),i(),o(47,"c-form-feedback",14),l(48,"Campo requerido."),i()()(),o(49,"c-input-group",10)(50,"div",11)(51,"input",26),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("confirmarContrasenia",e.form))})("keyup",function(e){p(t);let c=u();return f(c.validarRepetirContrasenia(e))}),i(),o(52,"label",27),l(53,"Confirmar contrase\xF1a"),i(),o(54,"c-form-feedback",14),l(55,"Campo requerido."),i()()(),o(56,"div",28)(57,"button",29),d("click",function(){p(t);let e=u();return f(e.registrarse())}),l(58,"Crear cuenta"),i()(),o(59,"div",30)(60,"c-col")(61,"a",31),d("click",function(){p(t);let e=u();return f(e.login())}),l(62," Iniciar sesi\xF3n "),i()()()()}if(s&2){let t=u();r("formGroup",t.form),n(5),r("ngIf",t.mostrarError),n(),r("ngIf",t.mostrarSuccess),n(2),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"nombres","CR")==1?!1:null)("maxLength",70),n(3),r("valid",!1),n(3),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"apellidos","CR")==1?!1:null)("maxLength",60),n(3),r("valid",!1),n(3),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"telefono","CR")==1||t.functionsUtils.campoRequerido(t.form,"telefono","TI")==3?!1:null)("maxLength",8),n(3),r("ngIf",t.functionsUtils.getValueMap("telefono")==1),n(),r("ngIf",t.functionsUtils.getValueMap("telefono")==3),n(2),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"correo","CR")==1||t.functionsUtils.campoRequerido(t.form,"correo","EI")==2?!1:null)("maxLength",60),n(3),r("ngIf",t.functionsUtils.getValueMap("correo")===1),n(),r("ngIf",t.functionsUtils.getValueMap("correo")===2),n(2),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"usuario","CR")==1?!1:null)("maxLength",25),n(3),r("valid",!1),n(3),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"contrasenia","CR")==1?!1:null)("maxLength",35),n(3),r("valid",!1),n(3),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"confirmarContrasenia","CR")==1?!1:null)("maxLength",35),n(3),r("valid",!1),n(3),r("disabled",t.form.invalid||t.contraseniasNoIguales||t.errorUniques||t.service.deshabilitarBotones)}}function pe(s){let m=s.value;return/^[0-9\s]+$/.test(m)?null:{onlyNumbersAndSpaces:!0}}var Ue=(()=>{let m=class m{constructor(a,e,c,C){this.service=a,this.router=e,this.functionsUtils=c,this.titleService=C,this.mostrarError=!1,this.mensaje=""}ngOnInit(){return w(this,null,function*(){this.service.mostrarSpinner=!1,this.service.deshabilitarBotones=!1,this.mostrarSuccess=!1,this.form=new Y({nombres:new v("",_.required),apellidos:new v("",_.required),telefono:new v("",[_.required,pe,_.minLength(8)]),correo:new v("",[_.email,_.required]),usuario:new v("",_.required),contrasenia:new v("",_.required),confirmarContrasenia:new v("",_.required)}),this.contraseniasNoIguales=!1,this.errorUniques=!1,this.titleService.setTitle("Holandesa")})}validarRepetirContrasenia(a){let e=this.form.controls.contrasenia.value,c=this.form.controls.confirmarContrasenia.value;clearTimeout(this.timer),this.timer=setTimeout(()=>{e&&c?e!=c?(this.mensaje="Las contrase\xF1as no coinciden",this.mostrarError=!0,this.contraseniasNoIguales=!0):(this.mensaje="",this.mostrarError=!1,this.contraseniasNoIguales=!1):(this.mostrarError=!1,this.mensaje="",this.contraseniasNoIguales=!1)},0)}llenarObjeto(a){let c=this.form.controls.usuario.value.toString().trim().toLowerCase(),C=this.service.hashMD5(this.form.controls.contrasenia.value.toString().trim()),b=this.form.controls.nombres.value.toString().trim(),S=this.form.controls.apellidos.value.toString().trim(),y=this.form.controls.telefono.value.toString().trim(),E=this.form.controls.correo.value.toString().trim().toLowerCase();return new x(0,c,C,b,S,E,y,null,null,"N")}campoRequerido(a,e){return a.controls[e].value.trim()===""&&a.controls[e].touched?1:a.controls[e]?.touched&&a.controls[e]?.hasError("email")?2:a.controls[e].touched&&(!/^[0-9\s]+$/.test(a.controls[e].value.trim())||a.controls[e].value.length<8)?3:0}registrarse(){return w(this,null,function*(){let a=this.llenarObjeto(this.form),e=new ie("","","","",null,a,0,0);this.errorUniques=!1,this.mostrarError=!1,this.mensaje="",clearTimeout(this.timer),this.timer=setTimeout(()=>{this.errorUniques=!1},1e3),this.mostrarError||(this.service.deshabilitarBotones=!0,this.mostrarSuccess=!0,this.service.mostrarSpinner=!0,this.service.saveEntity("usuarios",a).subscribe(c=>{this.service.mostrarSpinner=!1,c?(this.mensaje="Usuario registrado con \xE9xito",clearTimeout(this.timer),this.timer=setTimeout(()=>{this.errorUniques=!1,this.mostrarSuccess=!1,this.service.deshabilitarBotones=!1,this.functionsUtils.navigateOption(this.router,"login")},2400)):(this.service.mostrarSpinner=!1,this.mostrarError=!0,this.service.deshabilitarBotones=!1)},c=>{this.service.deshabilitarBotones=!1,this.service.mostrarSpinner=!1,console.error(c)}))})}login(){this.functionsUtils.navigateOption(this.router,"login")}};m.\u0275fac=function(e){return new(e||m)(h(K),h(L),h(J),h(V))},m.\u0275cmp=R({type:m,selectors:[["app-register"]],standalone:!0,features:[U],decls:8,vars:1,consts:[[1,"bg-light","dark:bg-transparent","min-vh-100","d-flex","flex-row","align-items-center"],[1,"justify-content-center"],["lg","7","md","9","xl","6"],[1,"mx-4"],[1,"p-4"],["cForm","",3,"formGroup",4,"ngIf"],["cForm","",3,"formGroup"],[1,"text-body-secondary"],["color","danger",4,"ngIf"],["color","success",4,"ngIf"],[1,"mb-2"],[3,"cFormFloating"],["id","nombres","autoComplete","name","cFormControl","","placeholder","Nombres","formControlName","nombres",3,"blur","valid","maxLength"],["cLabel","","for","nombres"],[3,"valid"],["id","apellidos","autoComplete","name","cFormControl","","placeholder","Apellidos","formControlName","apellidos",3,"blur","valid","maxLength"],["cLabel","","for","apellidos"],["id","telefono","autoComplete","telefono","cFormControl","","placeholder","Tel\xE9fono","formControlName","telefono",3,"blur","valid","maxLength"],["cLabel","","for","telefono"],[3,"valid",4,"ngIf"],["id","correo","autoComplete","email","type","email","cFormControl","","placeholder","Correo electr\xF3nico","formControlName","correo",3,"blur","valid","maxLength"],["cLabel","","for","correo"],["id","usuario","autoComplete","name","cFormControl","","placeholder","Usuario","formControlName","usuario",3,"blur","valid","maxLength"],["cLabel","","for","usuario"],["id","contrasenia","autoComplete","new-password","cFormControl","","placeholder","Contrase\xF1a","type","password","formControlName","contrasenia",3,"blur","keyup","valid","maxLength"],["cLabel","","for","contrasenia"],["id","confirmarContrasenia","autoComplete","new-password","cFormControl","","placeholder","Confirmar contrase\xF1a","type","password","formControlName","confirmarContrasenia",3,"blur","keyup","valid","maxLength"],["cLabel","","for","confirmarContrasenia"],[1,"d-grid"],["cButton","","color","success",2,"color","white",3,"click","disabled"],[2,"margin","0 auto","text-align","center"],["cButton","","color","link",1,"px-0",3,"click"],["color","danger"],["color","success"]],template:function(e,c){e&1&&(o(0,"div",0)(1,"c-container")(2,"c-row",1)(3,"c-col",2)(4,"c-card",3)(5,"c-card-body",4),g(6,ue,63,34,"form",5),i()()()()()(),k(7,"app-custom-spinner")),e&2&&(n(6),r("ngIf",c.form))},dependencies:[H,z,P,D,B,M,O,A,N,j,I,q,re,Z,Q,W,X,ee,te,G,$,oe],styles:["button[_ngcontent-%COMP%]    {background-color:#00b3ba!important;border-color:#00b3ba!important}"]});let s=m;return s})();export{Ue as RegisterComponent};
