import{a as re}from"./chunk-C6TJHT6G.js";import{a as H,b as J,c as oe}from"./chunk-SSJQNKD5.js";import{b as K,c as _,d as Q,e as W,f as X,i as v,l as Y,o as Z,q as ee,x as te}from"./chunk-UVR4LUID.js";import{$ as n,Ac as D,Da as U,Fa as d,Fb as I,Ga as u,H as R,N as p,O as f,Qa as l,Ra as F,Xc as B,Yc as M,Za as q,Zc as G,aa as h,dd as O,ed as A,gd as $,ic as L,id as P,jd as z,ka as C,kc as N,na as r,ob as T,tb as V,xa as i,ya as o,za as k,zc as j}from"./chunk-JIQ6X7TI.js";import{k as w}from"./chunk-LTV2K23E.js";var g=class{constructor(m,t,a,e,c,x,b,S,y,E){this.id=m,this.usuario=t,this.contrasenia=a,this.nombres=e,this.apellidos=c,this.correo=x,this.telefono=b,this.sucursal=S,this.principal=y,this.sesion=E}};function ie(s,m){if(s&1&&(i(0,"c-alert",32),l(1),o()),s&2){let t=u(2);n(),F(t.mensaje)}}function ne(s,m){if(s&1&&(i(0,"c-alert",33),l(1),o()),s&2){let t=u(2);n(),F(t.mensaje)}}function ae(s,m){s&1&&(i(0,"c-form-feedback",14),l(1,"Campo requerido."),o()),s&2&&r("valid",!1)}function se(s,m){s&1&&(i(0,"c-form-feedback",14),l(1,"Solo se permiten valores num\xE9ricos del 0 al 9 con longitud m\xE1xima de 8 car\xE1cteres"),o()),s&2&&r("valid",!1)}function le(s,m){s&1&&(i(0,"c-form-feedback",14),l(1,"Campo requerido."),o()),s&2&&r("valid",!1)}function ce(s,m){s&1&&(i(0,"c-form-feedback",14),l(1,"Correo inv\xE1lido."),o()),s&2&&r("valid",!1)}function me(s,m){if(s&1){let t=U();i(0,"form",6)(1,"h1"),l(2,"Registrarse"),o(),i(3,"p",7),l(4,"Crea tu cuenta"),o(),C(5,ie,2,1,"c-alert",8)(6,ne,2,1,"c-alert",9),i(7,"c-input-group",10)(8,"div",11)(9,"input",12),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("nombres",e.form))}),o(),i(10,"label",13),l(11,"Nombres"),o(),i(12,"c-form-feedback",14),l(13,"Campo requerido."),o()()(),i(14,"c-input-group",10)(15,"div",11)(16,"input",15),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("apellidos",e.form))}),o(),i(17,"label",16),l(18,"Apellidos"),o(),i(19,"c-form-feedback",14),l(20,"Campo requerido."),o()()(),i(21,"c-input-group",10)(22,"div",11)(23,"input",17),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("telefono",e.form))}),o(),i(24,"label",18),l(25,"Tel\xE9fono"),o(),C(26,ae,2,1,"c-form-feedback",19)(27,se,2,1,"c-form-feedback",19),o()(),i(28,"c-input-group",10)(29,"div",11)(30,"input",20),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("correo",e.form))}),o(),i(31,"label",21),l(32,"Correo"),o(),C(33,le,2,1,"c-form-feedback",19)(34,ce,2,1,"c-form-feedback",19),o()(),i(35,"c-input-group",10)(36,"div",11)(37,"input",22),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("usuario",e.form))}),o(),i(38,"label",23),l(39,"Usuario"),o(),i(40,"c-form-feedback",14),l(41,"Campo requerido."),o()()(),i(42,"c-input-group",10)(43,"div",11)(44,"input",24),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("contrasenia",e.form))})("keyup",function(e){p(t);let c=u();return f(c.validarRepetirContrasenia(e))}),o(),i(45,"label",25),l(46,"Contrase\xF1a"),o(),i(47,"c-form-feedback",14),l(48,"Campo requerido."),o()()(),i(49,"c-input-group",10)(50,"div",11)(51,"input",26),d("blur",function(){p(t);let e=u();return f(e.functionsUtils.removeSpaces("confirmarContrasenia",e.form))})("keyup",function(e){p(t);let c=u();return f(c.validarRepetirContrasenia(e))}),o(),i(52,"label",27),l(53,"Confirmar contrase\xF1a"),o(),i(54,"c-form-feedback",14),l(55,"Campo requerido."),o()()(),i(56,"div",28)(57,"button",29),d("click",function(){p(t);let e=u();return f(e.registrarse())}),l(58,"Crear cuenta"),o()(),i(59,"div",30)(60,"c-col")(61,"a",31),d("click",function(){p(t);let e=u();return f(e.login())}),l(62," Iniciar sesi\xF3n "),o()()()()}if(s&2){let t=u();r("formGroup",t.form),n(5),r("ngIf",t.mostrarError),n(),r("ngIf",t.mostrarSuccess),n(2),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"nombres","CR")==1?!1:null)("maxLength",70),n(3),r("valid",!1),n(3),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"apellidos","CR")==1?!1:null)("maxLength",60),n(3),r("valid",!1),n(3),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"telefono","CR")==1||t.functionsUtils.campoRequerido(t.form,"telefono","TI")==3?!1:null)("maxLength",8),n(3),r("ngIf",t.functionsUtils.getValueMap("telefono")==1),n(),r("ngIf",t.functionsUtils.getValueMap("telefono")==3),n(2),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"correo","CR")==1||t.functionsUtils.campoRequerido(t.form,"correo","EI")==2?!1:null)("maxLength",60),n(3),r("ngIf",t.functionsUtils.getValueMap("correo")===1),n(),r("ngIf",t.functionsUtils.getValueMap("correo")===2),n(2),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"usuario","CR")==1?!1:null)("maxLength",25),n(3),r("valid",!1),n(3),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"contrasenia","CR")==1?!1:null)("maxLength",35),n(3),r("valid",!1),n(3),r("cFormFloating",!0),n(),r("valid",t.functionsUtils.campoRequerido(t.form,"confirmarContrasenia","CR")==1?!1:null)("maxLength",35),n(3),r("valid",!1),n(3),r("disabled",t.form.invalid||t.contraseniasNoIguales||t.errorUniques||t.service.deshabilitarBotones)}}function ue(s){let m=s.value;return/^[0-9\s]+$/.test(m)?null:{onlyNumbersAndSpaces:!0}}var ke=(()=>{let m=class m{constructor(a,e,c){this.service=a,this.router=e,this.functionsUtils=c,this.mostrarError=!1,this.mensaje=""}ngOnInit(){return w(this,null,function*(){this.service.mostrarSpinner=!1,this.service.deshabilitarBotones=!1,this.mostrarSuccess=!1,this.form=new X({nombres:new v("",_.required),apellidos:new v("",_.required),telefono:new v("",[_.required,ue,_.minLength(8)]),correo:new v("",[_.email,_.required]),usuario:new v("",_.required),contrasenia:new v("",_.required),confirmarContrasenia:new v("",_.required)}),this.contraseniasNoIguales=!1,this.errorUniques=!1})}validarRepetirContrasenia(a){let e=this.form.controls.contrasenia.value,c=this.form.controls.confirmarContrasenia.value;clearTimeout(this.timer),this.timer=setTimeout(()=>{e&&c?e!=c?(this.mensaje="Las contrase\xF1as no coinciden",this.mostrarError=!0,this.contraseniasNoIguales=!0):(this.mensaje="",this.mostrarError=!1,this.contraseniasNoIguales=!1):(this.mostrarError=!1,this.mensaje="",this.contraseniasNoIguales=!1)},0)}llenarObjeto(a){let c=this.form.controls.usuario.value.toString().trim().toLowerCase(),x=this.service.hashMD5(this.form.controls.contrasenia.value.toString().trim()),b=this.form.controls.nombres.value.toString().trim(),S=this.form.controls.apellidos.value.toString().trim(),y=this.form.controls.telefono.value.toString().trim(),E=this.form.controls.correo.value.toString().trim().toLowerCase();return new g(0,c,x,b,S,E,y,null,null,"N")}campoRequerido(a,e){return a.controls[e].value.trim()===""&&a.controls[e].touched?1:a.controls[e]?.touched&&a.controls[e]?.hasError("email")?2:a.controls[e].touched&&(!/^[0-9\s]+$/.test(a.controls[e].value.trim())||a.controls[e].value.length<8)?3:0}registrarse(){return w(this,null,function*(){let a=this.llenarObjeto(this.form),e=new re("","","","",null,a,0,0);this.errorUniques=!1,this.mostrarError=!1,this.mensaje="",clearTimeout(this.timer),this.timer=setTimeout(()=>{this.errorUniques=!1},1e3),this.mostrarError||(this.service.deshabilitarBotones=!0,this.mostrarSuccess=!0,this.service.mostrarSpinner=!0,this.service.saveEntity("usuarios",a).subscribe(c=>{this.service.mostrarSpinner=!1,c?(this.mensaje="Usuario registrado con \xE9xito",clearTimeout(this.timer),this.timer=setTimeout(()=>{this.errorUniques=!1,this.mostrarSuccess=!1,this.service.deshabilitarBotones=!1,this.functionsUtils.navigateOption(this.router,"login")},2400)):(this.service.mostrarSpinner=!1,this.mostrarError=!0,this.service.deshabilitarBotones=!1)},c=>{this.service.deshabilitarBotones=!1,this.service.mostrarSpinner=!1,console.error(c)}))})}login(){this.functionsUtils.navigateOption(this.router,"login")}};m.\u0275fac=function(e){return new(e||m)(h(J),h(I),h(H))},m.\u0275cmp=R({type:m,selectors:[["app-register"]],standalone:!0,features:[q],decls:8,vars:1,consts:[[1,"bg-light","dark:bg-transparent","min-vh-100","d-flex","flex-row","align-items-center"],[1,"justify-content-center"],["lg","7","md","9","xl","6"],[1,"mx-4"],[1,"p-4"],["cForm","",3,"formGroup",4,"ngIf"],["cForm","",3,"formGroup"],[1,"text-body-secondary"],["color","danger",4,"ngIf"],["color","success",4,"ngIf"],[1,"mb-2"],[3,"cFormFloating"],["id","nombres","autoComplete","name","cFormControl","","placeholder","Nombres","formControlName","nombres",3,"blur","valid","maxLength"],["cLabel","","for","nombres"],[3,"valid"],["id","apellidos","autoComplete","name","cFormControl","","placeholder","Apellidos","formControlName","apellidos",3,"blur","valid","maxLength"],["cLabel","","for","apellidos"],["id","telefono","autoComplete","telefono","cFormControl","","placeholder","Tel\xE9fono","formControlName","telefono",3,"blur","valid","maxLength"],["cLabel","","for","telefono"],[3,"valid",4,"ngIf"],["id","correo","autoComplete","email","type","email","cFormControl","","placeholder","Correo electr\xF3nico","formControlName","correo",3,"blur","valid","maxLength"],["cLabel","","for","correo"],["id","usuario","autoComplete","name","cFormControl","","placeholder","Usuario","formControlName","usuario",3,"blur","valid","maxLength"],["cLabel","","for","usuario"],["id","contrasenia","autoComplete","new-password","cFormControl","","placeholder","Contrase\xF1a","type","password","formControlName","contrasenia",3,"blur","keyup","valid","maxLength"],["cLabel","","for","contrasenia"],["id","confirmarContrasenia","autoComplete","new-password","cFormControl","","placeholder","Confirmar contrase\xF1a","type","password","formControlName","confirmarContrasenia",3,"blur","keyup","valid","maxLength"],["cLabel","","for","confirmarContrasenia"],[1,"d-grid"],["cButton","","color","success",2,"color","white",3,"click","disabled"],[2,"margin","0 auto","text-align","center"],["cButton","","color","link",1,"px-0",3,"click"],["color","danger"],["color","success"]],template:function(e,c){e&1&&(i(0,"div",0)(1,"c-container")(2,"c-row",1)(3,"c-col",2)(4,"c-card",3)(5,"c-card-body",4),C(6,me,63,34,"form",5),o()()()()()(),k(7,"app-custom-spinner")),e&2&&(n(6),r("ngIf",c.form))},dependencies:[$,z,P,j,D,B,G,O,L,N,V,T,te,Y,K,Q,W,Z,ee,M,A,oe],styles:["button[_ngcontent-%COMP%]    {background-color:#00b3ba!important;border-color:#00b3ba!important}"]});let s=m;return s})();export{ke as RegisterComponent};
