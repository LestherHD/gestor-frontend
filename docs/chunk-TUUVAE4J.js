import{a as xe,b as Ce}from"./chunk-GVBFG5PB.js";import"./chunk-RTEMKQTQ.js";import{a as P,b as Se,c as ve}from"./chunk-QKXWXE77.js";import{a as re}from"./chunk-72RWJUWI.js";import{a as oe,b as ne,c as _e}from"./chunk-D7TFSAOW.js";import{b as ae,c as T,d as le,e as se,f as b,i as h,k as me,l as de,o as ce,q as pe,r as ue,s as he,t as fe,w as ge,x as be}from"./chunk-4NMRZLOK.js";import"./chunk-WASN5T2M.js";import{$ as l,Cc as Z,Da as I,Fa as p,Ga as f,Gd as te,H as O,Ja as M,N as _,O as S,Ob as U,P as v,Q as E,Qa as e,Ra as C,Sa as y,Ta as G,Va as z,Wa as V,Xa as k,Xc as J,Yc as Q,Yd as ie,Za as D,aa as w,cd as X,fd as Y,hc as H,hd as $,id as ee,jc as R,ka as x,na as m,nb as A,ob as K,tb as L,xa as t,ya as o,yc as q,za as g,zc as W}from"./chunk-52LX7MYE.js";import{k as N}from"./chunk-LTV2K23E.js";var F=class{constructor(d,a){this.id=d,this.nombre=a}};var B=class{constructor(d,a,n){this.tipoProducto=d,this.page=a,this.size=n}};function Ee(s,d){if(s&1){let a=I();t(0,"tr"),e(1,`
                `),t(2,"td"),e(3),o(),e(4,`
                `),t(5,"td"),e(6),o(),e(7,`
                `),t(8,"td"),e(9,`
                  `),t(10,"button",7),p("click",function(){let r=_(a).$implicit,i=f();return S(i.modal(3,r))}),e(11,`
                    `),v(),g(12,"svg",36),e(13,`
                  `),o(),e(14,`
                  `),E(),t(15,"button",37),p("click",function(){let r=_(a).$implicit,i=f();return S(i.modal(2,r))}),e(16,`
                    `),v(),g(17,"svg",38),e(18,`
                  `),o(),e(19,`
                  `),E(),t(20,"button",39),p("click",function(){let r=_(a).$implicit,i=f();return S(i.modalEliminar(r))}),e(21,`
                    `),v(),g(22,"svg",40),e(23,`
                  `),o(),e(24,`

                `),o(),e(25,`
              `),o()}if(s&2){let a=d.$implicit;l(3),C(a.id),l(3),C(a.nombre)}}function Fe(s,d){if(s&1&&(t(0,"c-alert",41),e(1),o()),s&2){let a=f();M("color",a.type),l(),C(a.mensaje)}}function we(s,d){s&1&&(t(0,"c-input-group",29)(1,"div",30)(2,"label",42),e(3,"Id"),o(),g(4,"input",43),o()())}function Me(s,d){if(s&1&&(t(0,"c-alert",41),e(1),o()),s&2){let a=f();M("color",a.type),l(),C(a.mensaje)}}function ye(s,d){if(s&1&&(t(0,"form",44)(1,"span",45),e(2),o()()),s&2){let a=f();m("formGroup",a.formEliminar),l(2),G("Confirmar eliminar el registro: ",a.formEliminar.controls.id.value," - ",a.formEliminar.controls.nombre.value,"")}}function Te(s,d){if(s&1&&(t(0,"c-alert",41),e(1),o()),s&2){let a=f();M("color",a.type),l(),C(a.mensaje)}}function Pe(s,d){if(s&1){let a=I();t(0,"form",44)(1,"form",26)(2,"div",4)(3,"c-input-group",29)(4,"div",30)(5,"label",42),e(6,"Id"),o(),t(7,"input",46),p("blur",function(){_(a);let r=f();return S(r.functionsUtils.removeSpaces("nombre",r.formFiltros))}),o()()(),t(8,"c-input-group",29)(9,"div",30)(10,"label",31),e(11),o(),t(12,"input",47),p("blur",function(){_(a);let r=f();return S(r.functionsUtils.removeSpaces("nombre",r.formFiltros))}),o()()()()()()}if(s&2){let a=f();m("formGroup",a.formFiltros),l(),m("formGroup",a.formFiltros),l(10),y("Nombre ",a.modo===1?"*":"",""),l(),m("maxLength",50)}}var tt=(()=>{let d=class d{constructor(n,r,i){this.service=n,this.dataUtils=r,this.functionsUtils=i,this.deshabilitarBotones=!1,this.mostrarMensaje=!1,this.listResponse=[],this.type="",this.mensaje="",this.nombreAccion="",this.modo=0,this.deshabilitarBotones=!1,this.mostrarMensaje=!1,this.mostrarModalFiltro=!1,this.mostrarModalCrud=!1,this.mostrarModalEliminar=!1,this.pagination=new P,this.pagination.page=0,this.pagination.pageSize=10,this.pagination.maxSize=4}ngOnInit(){this.resetFormFiltros(),this.formFiltrosBK=this.formFiltros,this.resetForm(),this.getValuesByPage("","",this.pagination.page,this.pagination.pageSize)}filtrar(){this.mostrarModalFiltro=!1,this.deshabilitarBotones=!0,this.formFiltrosBK=new b({id:new h({value:this.formFiltros.controls.id.value.toString().trim(),disabled:!0}),nombre:new h({value:this.formFiltros.controls.nombre.value.toString().trim(),disabled:!0})}),this.getValuesByPage(this.formFiltrosBK.controls.id.value.toString().trim(),this.formFiltrosBK.controls.nombre.value.toString(),0,this.pagination.pageSize)}changePage(n){this.pagination.page=n,this.getValuesByPage(this.formFiltrosBK.controls.id.value.toString().trim(),this.formFiltrosBK.controls.nombre.value.toString(),this.pagination.page,this.pagination.pageSize)}changeSize(n){this.pagination.pageSize=n.value,this.getValuesByPage(this.formFiltrosBK.controls.id.value.toString().trim(),this.formFiltrosBK.controls.nombre.value.toString(),0,this.pagination.pageSize)}getValuesByPage(n,r,i,c){this.pagination.page=i+1;let u=new B(new F(n,r),i,c);this.service.mostrarSpinner=!0,this.service.getFromEntityByPage("tipoProducto",u).subscribe(j=>{this.listResponse=j.content,this.pagination.collectionSize=j.totalElements,this.service.mostrarSpinner=!1},j=>{this.service.mostrarSpinner=!1,console.error("Error al consumir Get All")})}resetFormFiltros(){this.formFiltros=new b({id:new h(""),nombre:new h("")})}resetForm(){this.form=new b({id:new h({value:"",disabled:!0}),nombre:new h("",T.required)})}llenarForm(n){this.form=new b({id:new h({value:n.id,disabled:!0}),nombre:new h(n.nombre,T.required)})}llenarFormDisabled(n){this.form=new b({id:new h({value:n.id,disabled:!0}),nombre:new h({value:n.nombre,disabled:!0},T.required)})}llenarObjeto(n){return new F(n.controls.id.value,n.controls.nombre.value.toString().trim())}modal(n,r){this.mostrarModalCrud=!0,this.modo=n,this.deshabilitarBotones=!1;let i=document.getElementById("inputCodigo");i&&i.focus(),this.modo===1?(this.nombreAccion="Agregar",this.resetForm()):this.modo===2?(this.nombreAccion="Editar",this.llenarForm(r)):this.modo===3&&(this.nombreAccion="Ver",this.llenarFormDisabled(r))}modalEliminar(n){this.nombreAccion="Eliminar",this.mostrarModalEliminar=!0,this.deshabilitarBotones=!1,this.formEliminar=new b({id:new h({value:n.id,disabled:!0}),nombre:new h({value:n.nombre,disabled:!0})})}guardar(){if(this.service.mostrarSpinner=!0,this.deshabilitarBotones=!0,this.modo===1){if(this.form&&this.form.valid){let n=this.llenarObjeto(this.form);this.service.saveEntity("tipoProducto",n).subscribe(r=>{this.type=r.error?"danger":"success",this.mensaje=r.mensaje,this.deshabilitarBotones=!0,this.mostrarMensaje=!0,this.service.mostrarSpinner=!1,setTimeout(()=>{this.mostrarMensaje=!1,this.mostrarModalCrud=!!r.error,this.deshabilitarBotones=!r.error,r.error||(this.resetFormFiltros(),this.getValuesByPage(this.formFiltros.controls.id.value.toString().trim(),this.formFiltros.controls.nombre.value.toString(),0,this.pagination.pageSize))},2e3)},r=>{this.type="danger",this.mensaje="Ha ocurrido un error al insertar los datos",this.deshabilitarBotones=!1,this.service.mostrarSpinner=!1,this.mostrarMensaje=!0,setTimeout(()=>{this.mostrarMensaje=!1},1500),console.error("Error al consumir Post")})}}else if(this.modo===2&&this.form&&this.form.valid){let n=this.llenarObjeto(this.form);this.service.editEntity("tipoProducto",n).subscribe(r=>{this.type=r.error?"danger":"success",this.mensaje=r.mensaje,this.deshabilitarBotones=!0,this.mostrarMensaje=!0,this.service.mostrarSpinner=!1,setTimeout(()=>{this.mostrarMensaje=!1,this.mostrarModalCrud=!!r.error,this.deshabilitarBotones=!r.error,r.error||(this.resetFormFiltros(),this.getValuesByPage(this.formFiltros.controls.id.value.toString().trim(),this.formFiltros.controls.nombre.value.toString(),0,this.pagination.pageSize))},2e3)},r=>{this.type="danger",this.mensaje="Ha ocurrido un error al actualizar los datos",this.mostrarMensaje=!0,this.deshabilitarBotones=!1,this.service.mostrarSpinner=!1,setTimeout(()=>{this.mostrarMensaje=!1},1500),console.error("Error al consumir Post")})}}eliminar(){return N(this,null,function*(){this.service.mostrarSpinner=!0,this.deshabilitarBotones=!0,this.service.deleteEntity("tipoProducto",this.formEliminar.controls.id.value).subscribe(n=>{this.type=n.error?"danger":"success",this.mensaje=n.mensaje,this.deshabilitarBotones=!0,this.mostrarMensaje=!0,setTimeout(()=>{this.service.mostrarSpinner=!1,this.mostrarModalEliminar=!!n.error,this.deshabilitarBotones=!1,this.mostrarMensaje=!1},2e3),this.getValuesByPage(this.formFiltrosBK.controls.id.value.toString().trim(),this.formFiltrosBK.controls.nombre.value.toString(),0,this.pagination.pageSize)},n=>{this.service.mostrarSpinner=!1,this.type="danger",this.deshabilitarBotones=!1,this.mensaje="Ha ocurrido un error al eliminar el registro",this.mostrarMensaje=!0,setTimeout(()=>{this.mostrarMensaje=!1},2e3),console.error("Error al consumir delete")})})}showModalFilters(){this.deshabilitarBotones=!1,this.nombreAccion="Filtrar",this.resetFormFiltros(),this.mostrarModalFiltro=!0}closeModal(){this.resetForm(),this.mostrarModalCrud=!1}closeModalDelete(){this.resetForm(),this.mostrarModalEliminar=!1}closeModalFilters(){this.resetFormFiltros(),this.mostrarModalFiltro=!1}};d.\u0275fac=function(r){return new(r||d)(w(ne),w(re),w(oe))},d.\u0275cmp=O({type:d,selectors:[["app-tipo-producto"]],standalone:!0,features:[D],decls:132,vars:34,consts:[["xs","12"],[1,"mb-4"],[1,"card-header"],[2,"display","flex","justify-content","space-between"],[1,"col-auto"],["cButton","","color","secondary","variant","outline","size","sm",3,"click"],["cIcon","","name","cilFilter"],["cButton","","color","success","variant","outline","size","sm",3,"click"],["cIcon","","name","cilPlus"],[1,"text-center","scroll"],["cTable","",3,"striped"],["scope","col"],[4,"ngFor","ngForOf"],[1,"row","col-12"],[1,"col-12","col-md-6",2,"margin-top","1vh","text-align","center"],[3,"pageChange","page","maxSize","pageSize","collectionSize"],[1,"col-12","col-md-6","d-flex","flex-column","flex-md-row","justify-content-end","align-items-center"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","20"],["value","50"],["value","100"],[3,"close","submit","showModal","tittle","disabledSubmit","disabledOthersButtons","showSubmit"],[1,"d-flex","justify-content-center"],[1,"col-10"],["cForm","",3,"formGroup"],[3,"color",4,"ngIf"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"col-12"],["for","nombre",1,"fw-bold"],["id","nombre","autoComplete","nombre","formControlName","nombre","cFormControl","",3,"blur","maxLength","valid"],[3,"valid"],[1,"justify-content-center","col-11"],[3,"formGroup",4,"ngIf"],["cIcon","","name","cilZoom"],["cButton","","color","info","variant","outline","size","sm",3,"click"],["cIcon","","name","cilPencil"],["cButton","","color","danger","variant","outline","size","sm",3,"click"],["cIcon","","name","cilTrash"],[3,"color"],["for","id",1,"fw-bold"],["id","id","autoComplete","id","formControlName","id","cFormControl",""],[3,"formGroup"],[2,"word-wrap","break-word"],["autoComplete","id","formControlName","id","cFormControl","",3,"blur"],["autoComplete","nombre","formControlName","nombre","cFormControl","",3,"blur","maxLength"]],template:function(r,i){r&1&&(t(0,"c-row"),e(1,`
  `),t(2,"c-col",0),e(3,`
    `),t(4,"c-card",1),e(5,`
      `),t(6,"c-card-header",2),e(7,`

        `),t(8,"div",3),e(9,`
          `),t(10,"strong"),e(11,"Tipos de productos"),o(),e(12,`
          `),t(13,"div",4),e(14,`
            `),t(15,"span"),e(16),o(),e(17,`
          `),o(),e(18,`
          `),t(19,"div"),e(20,`
            `),t(21,"button",5),p("click",function(){return i.showModalFilters()}),e(22,`
              `),v(),g(23,"svg",6),e(24,`
            `),o(),e(25,`
            `),E(),t(26,"button",7),p("click",function(){return i.modal(1,null)}),e(27,`
              `),v(),g(28,"svg",8),e(29,`
            `),o(),e(30,`
          `),o(),e(31,`
        `),o(),e(32,`
      `),o(),e(33,`
      `),E(),t(34,"c-card-body"),e(35,`
        `),t(36,"c-container"),e(37,`
          `),t(38,"div",9),e(39,`
            `),t(40,"table",10),e(41,`
              `),t(42,"thead"),e(43,`
              `),t(44,"tr"),e(45,`
                `),t(46,"th",11),e(47,"Id"),o(),e(48,`
                `),t(49,"th",11),e(50,"Nombre"),o(),e(51,`
                `),t(52,"th",11),e(53,"Acciones"),o(),e(54,`
              `),o(),e(55,`
              `),o(),e(56,`
              `),t(57,"tbody"),e(58,`
              `),x(59,Ee,26,2,"tr",12),e(60,`
              `),o(),e(61,`
            `),o(),e(62,`
          `),o(),e(63,`
          `),t(64,"div",13),e(65,`
            `),t(66,"div",14),e(67,`
              `),t(68,"div",4),e(69,`
                `),t(70,"ngb-pagination",15),k("pageChange",function(u){return V(i.pagination.page,u)||(i.pagination.page=u),u}),p("pageChange",function(u){return i.changePage(u-1)}),o(),e(71,`
              `),o(),e(72,`
            `),o(),e(73,`
            `),t(74,"div",16),e(75,`
              `),t(76,"div",4),e(77,`
                `),t(78,"span"),e(79,"Registros por p\xE1gina:"),o(),e(80,`
              `),o(),e(81,`
              `),t(82,"div",4),e(83,`
                `),t(84,"select",17),k("ngModelChange",function(u){return V(i.pagination.pageSize,u)||(i.pagination.pageSize=u),u}),p("change",function(u){return i.changeSize(u.target)}),e(85,`
                  `),t(86,"option",18),e(87,"5"),o(),e(88,`
                  `),t(89,"option",19),e(90,"10"),o(),e(91,`
                  `),t(92,"option",20),e(93,"20"),o(),e(94,`
                  `),t(95,"option",21),e(96,"50"),o(),e(97,`
                  `),t(98,"option",22),e(99,"100"),o(),e(100,`
                `),o(),e(101,`
              `),o(),e(102,`
            `),o(),e(103,`
          `),o(),e(104,`
        `),o(),e(105,`
      `),o(),e(106,`
    `),o(),e(107,`
  `),o(),e(108,`
`),o(),g(109,"app-custom-spinner"),t(110,"app-modal-crud",23),p("close",function(){return i.closeModal()})("submit",function(){return i.guardar()}),t(111,"div",24)(112,"div",25)(113,"form",26),x(114,Fe,2,2,"c-alert",27),t(115,"div",4),x(116,we,5,0,"c-input-group",28),t(117,"c-input-group",29)(118,"div",30)(119,"label",31),e(120),o(),t(121,"input",32),p("blur",function(){return i.functionsUtils.removeSpaces("nombre",i.form)}),o(),t(122,"c-form-feedback",33),e(123,"Campo requerido."),o()()()()()()()(),t(124,"app-modal-delete",23),p("close",function(){return i.closeModalDelete()})("submit",function(){return i.eliminar()}),t(125,"div",34),x(126,Me,2,2,"c-alert",27)(127,ye,3,3,"form",35),o()(),t(128,"app-modal-filters",23),p("close",function(){return i.closeModalFilters()})("submit",function(){return i.filtrar()}),t(129,"div",34),x(130,Te,2,2,"c-alert",27)(131,Pe,13,4,"form",35),o()()),r&2&&(l(16),y("Total: ",i.pagination.collectionSize,""),l(24),m("striped",!0),l(19),m("ngForOf",i.listResponse),l(11),z("page",i.pagination.page),m("maxSize",i.pagination.maxSize)("pageSize",i.pagination.pageSize)("collectionSize",i.pagination.collectionSize),l(14),z("ngModel",i.pagination.pageSize),l(26),m("showModal",i.mostrarModalCrud)("tittle",i.nombreAccion)("disabledSubmit",i.form.invalid||i.deshabilitarBotones)("disabledOthersButtons",i.deshabilitarBotones)("showSubmit",i.modo!==3),l(3),m("formGroup",i.form),l(),m("ngIf",i.mostrarMensaje),l(2),m("ngIf",i.modo!==1),l(4),y("Nombre ",i.modo===1?"*":"",""),l(),m("maxLength",50)("valid",i.functionsUtils.campoRequerido(i.form,"nombre","CR")==1?!1:null),l(),m("valid",!1),l(2),m("showModal",i.mostrarModalEliminar)("tittle",i.nombreAccion)("disabledSubmit",i.deshabilitarBotones)("disabledOthersButtons",i.deshabilitarBotones)("showSubmit",!0),l(2),m("ngIf",i.mostrarMensaje),l(),m("ngIf",i.formEliminar),l(),m("showModal",i.mostrarModalFiltro)("tittle",i.nombreAccion)("disabledSubmit",i.deshabilitarBotones)("disabledOthersButtons",i.deshabilitarBotones)("showSubmit",!0),l(2),m("ngIf",i.mostrarMensaje),l(),m("ngIf",i.formFiltros))},dependencies:[Z,W,Y,q,ee,$,ie,te,L,A,K,H,U,ge,de,he,fe,ae,ue,le,se,me,Se,P,_e,ve,J,Q,R,X,be,ce,pe,xe,Ce],styles:['@charset "UTF-8";ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{color:#00b3bae6!important}ngb-pagination[_ngcontent-%COMP%]     ul>li.active>a{background-color:#00b3bae6!important;border-color:#00b3ba80!important}.scroll[_ngcontent-%COMP%]{max-height:55vh;overflow:scroll}@media only screen and (max-width: 767px){td[_ngcontent-%COMP%]{word-wrap:break-word;max-width:50vw}}@media only screen and (min-width: 768px) and (max-width: 1023px){td[_ngcontent-%COMP%]{word-wrap:break-word;max-width:40vw}}@media only screen and (min-width: 1024px){td[_ngcontent-%COMP%]{word-wrap:break-word;max-width:10vw}}li[_ngcontent-%COMP%]{cursor:pointer}']});let s=d;return s})();export{tt as TipoProductoComponent};
